var ni=Object.create;var Xe=Object.defineProperty,ii=Object.defineProperties,si=Object.getOwnPropertyDescriptor,ai=Object.getOwnPropertyDescriptors,oi=Object.getOwnPropertyNames,Kt=Object.getOwnPropertySymbols,ci=Object.getPrototypeOf,zt=Object.prototype.hasOwnProperty,ui=Object.prototype.propertyIsEnumerable;var Wt=(e,t,r)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jt=(e,t)=>{for(var r in t||(t={}))zt.call(t,r)&&Wt(e,r,t[r]);if(Kt)for(var r of Kt(t))ui.call(t,r)&&Wt(e,r,t[r]);return e},Vt=(e,t)=>ii(e,ai(t));var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var li=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of oi(t))!zt.call(e,i)&&i!==r&&Xe(e,i,{get:()=>t[i],enumerable:!(n=si(t,i))||n.enumerable});return e};var Re=(e,t,r)=>(r=e!=null?ni(ci(e)):{},li(t||!e||!e.__esModule?Xe(r,"default",{value:e,enumerable:!0}):r,e));var Ne=w(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.toCommandProperties=se.toCommandValue=void 0;function fi(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}se.toCommandValue=fi;function hi(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}se.toCommandProperties=hi});var Zt=w(C=>{"use strict";var di=C&&C.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),pi=C&&C.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mi=C&&C.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&di(t,e,r);return pi(t,e),t};Object.defineProperty(C,"__esModule",{value:!0});C.issue=C.issueCommand=void 0;var vi=mi(require("os")),Xt=Ne();function Yt(e,t,r){let n=new Ht(e,t,r);process.stdout.write(n.toString()+vi.EOL)}C.issueCommand=Yt;function gi(e,t=""){Yt(e,{},t)}C.issue=gi;var Qt="::",Ht=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=Qt+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let i=this.properties[n];i&&(r?r=!1:t+=",",t+=`${n}=${_i(i)}`)}}return t+=`${Qt}${yi(this.message)}`,t}};function yi(e){return Xt.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function _i(e){return Xt.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var rr=w(L=>{"use strict";var wi=L&&L.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ei=L&&L.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),tr=L&&L.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&wi(t,e,r);return Ei(t,e),t};Object.defineProperty(L,"__esModule",{value:!0});L.issueCommand=void 0;var er=tr(require("fs")),bi=tr(require("os")),Si=Ne();function Oi(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!er.existsSync(r))throw new Error(`Missing file at path: ${r}`);er.appendFileSync(r,`${Si.toCommandValue(t)}${bi.EOL}`,{encoding:"utf8"})}L.issueCommand=Oi});var ir=w(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});function Ai(e){let t=e.protocol==="https:",r;if(nr(e))return r;let n;return t?n=process.env.https_proxy||process.env.HTTPS_PROXY:n=process.env.http_proxy||process.env.HTTP_PROXY,n&&(r=new URL(n)),r}qe.getProxyUrl=Ai;function nr(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let i of t.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(n.some(s=>s===i))return!0;return!1}qe.checkBypass=nr});var cr=w(ae=>{"use strict";var Ca=require("net"),ki=require("tls"),Ye=require("http"),sr=require("https"),Ti=require("events"),Ia=require("assert"),Ri=require("util");ae.httpOverHttp=Ni;ae.httpsOverHttp=qi;ae.httpOverHttps=Di;ae.httpsOverHttps=xi;function Ni(e){var t=new G(e);return t.request=Ye.request,t}function qi(e){var t=new G(e);return t.request=Ye.request,t.createSocket=ar,t.defaultPort=443,t}function Di(e){var t=new G(e);return t.request=sr.request,t}function xi(e){var t=new G(e);return t.request=sr.request,t.createSocket=ar,t.defaultPort=443,t}function G(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Ye.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,i,s,a){for(var c=or(i,s,a),o=0,u=t.requests.length;o<u;++o){var l=t.requests[o];if(l.host===c.host&&l.port===c.port){t.requests.splice(o,1),l.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}Ri.inherits(G,Ti.EventEmitter);G.prototype.addRequest=function(t,r,n,i){var s=this,a=He({request:t},s.options,or(r,n,i));if(s.sockets.length>=this.maxSockets){s.requests.push(a);return}s.createSocket(a,function(c){c.on("free",o),c.on("close",u),c.on("agentRemove",u),t.onSocket(c);function o(){s.emit("free",c,a)}function u(l){s.removeSocket(c),c.removeListener("free",o),c.removeListener("close",u),c.removeListener("agentRemove",u)}})};G.prototype.createSocket=function(t,r){var n=this,i={};n.sockets.push(i);var s=He({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),K("making CONNECT request");var a=n.request(s);a.useChunkedEncodingByDefault=!1,a.once("response",c),a.once("upgrade",o),a.once("connect",u),a.once("error",l),a.end();function c(h){h.upgrade=!0}function o(h,f,d){process.nextTick(function(){u(h,f,d)})}function u(h,f,d){if(a.removeAllListeners(),f.removeAllListeners(),h.statusCode!==200){K("tunneling socket could not be established, statusCode=%d",h.statusCode),f.destroy();var p=new Error("tunneling socket could not be established, statusCode="+h.statusCode);p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(i);return}if(d.length>0){K("got illegal response body from proxy"),f.destroy();var p=new Error("got illegal response body from proxy");p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(i);return}return K("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=f,r(f)}function l(h){a.removeAllListeners(),K(`tunneling socket could not be established, cause=%s
`,h.message,h.stack);var f=new Error("tunneling socket could not be established, cause="+h.message);f.code="ECONNRESET",t.request.emit("error",f),n.removeSocket(i)}};G.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(i){n.request.onSocket(i)})}};function ar(e,t){var r=this;G.prototype.createSocket.call(r,e,function(n){var i=e.request.getHeader("host"),s=He({},r.options,{socket:n,servername:i?i.replace(/:.*$/,""):e.host}),a=ki.connect(0,s);r.sockets[r.sockets.indexOf(n)]=a,t(a)})}function or(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function He(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var i=Object.keys(n),s=0,a=i.length;s<a;++s){var c=i[s];n[c]!==void 0&&(e[c]=n[c])}}return e}var K;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?K=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:K=function(){};ae.debug=K});var lr=w((ja,ur)=>{ur.exports=cr()});var hr=w(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var De=require("http"),Ze=require("https"),fr=ir(),oe,M;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(M=D.HttpCodes||(D.HttpCodes={}));var N;(function(e){e.Accept="accept",e.ContentType="content-type"})(N=D.Headers||(D.Headers={}));var W;(function(e){e.ApplicationJson="application/json"})(W=D.MediaTypes||(D.MediaTypes={}));function Ci(e){let t=fr.getProxyUrl(new URL(e));return t?t.href:""}D.getProxyUrl=Ci;var Ii=[M.MovedPermanently,M.ResourceMoved,M.SeeOther,M.TemporaryRedirect,M.PermanentRedirect],Pi=[M.BadGateway,M.ServiceUnavailable,M.GatewayTimeout],ji=["OPTIONS","GET","DELETE","HEAD"],Mi=10,Li=5,ye=class extends Error{constructor(t,r){super(t);this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,ye.prototype)}};D.HttpClientError=ye;var et=class{constructor(t){this.message=t}readBody(){return new Promise(async(t,r)=>{let n=Buffer.alloc(0);this.message.on("data",i=>{n=Buffer.concat([n,i])}),this.message.on("end",()=>{t(n.toString())})})}};D.HttpClientResponse=et;function Ui(e){return new URL(e).protocol==="https:"}D.isHttps=Ui;var xe=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return this.request("OPTIONS",t,null,r||{})}get(t,r){return this.request("GET",t,null,r||{})}del(t,r){return this.request("DELETE",t,null,r||{})}post(t,r,n){return this.request("POST",t,r,n||{})}patch(t,r,n){return this.request("PATCH",t,r,n||{})}put(t,r,n){return this.request("PUT",t,r,n||{})}head(t,r){return this.request("HEAD",t,null,r||{})}sendStream(t,r,n,i){return this.request(t,r,n,i)}async getJson(t,r={}){r[N.Accept]=this._getExistingOrDefaultHeader(r,N.Accept,W.ApplicationJson);let n=await this.get(t,r);return this._processResponse(n,this.requestOptions)}async postJson(t,r,n={}){let i=JSON.stringify(r,null,2);n[N.Accept]=this._getExistingOrDefaultHeader(n,N.Accept,W.ApplicationJson),n[N.ContentType]=this._getExistingOrDefaultHeader(n,N.ContentType,W.ApplicationJson);let s=await this.post(t,i,n);return this._processResponse(s,this.requestOptions)}async putJson(t,r,n={}){let i=JSON.stringify(r,null,2);n[N.Accept]=this._getExistingOrDefaultHeader(n,N.Accept,W.ApplicationJson),n[N.ContentType]=this._getExistingOrDefaultHeader(n,N.ContentType,W.ApplicationJson);let s=await this.put(t,i,n);return this._processResponse(s,this.requestOptions)}async patchJson(t,r,n={}){let i=JSON.stringify(r,null,2);n[N.Accept]=this._getExistingOrDefaultHeader(n,N.Accept,W.ApplicationJson),n[N.ContentType]=this._getExistingOrDefaultHeader(n,N.ContentType,W.ApplicationJson);let s=await this.patch(t,i,n);return this._processResponse(s,this.requestOptions)}async request(t,r,n,i){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),a=this._prepareRequest(t,s,i),c=this._allowRetries&&ji.indexOf(t)!=-1?this._maxRetries+1:1,o=0,u;for(;o<c;){if(u=await this.requestRaw(a,n),u&&u.message&&u.message.statusCode===M.Unauthorized){let h;for(let f=0;f<this.handlers.length;f++)if(this.handlers[f].canHandleAuthentication(u)){h=this.handlers[f];break}return h?h.handleAuthentication(this,a,n):u}let l=this._maxRedirects;for(;Ii.indexOf(u.message.statusCode)!=-1&&this._allowRedirects&&l>0;){let h=u.message.headers.location;if(!h)break;let f=new URL(h);if(s.protocol=="https:"&&s.protocol!=f.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(await u.readBody(),f.hostname!==s.hostname)for(let d in i)d.toLowerCase()==="authorization"&&delete i[d];a=this._prepareRequest(t,f,i),u=await this.requestRaw(a,n),l--}if(Pi.indexOf(u.message.statusCode)==-1)return u;o+=1,o<c&&(await u.readBody(),await this._performExponentialBackoff(o))}return u}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return new Promise((n,i)=>{let s=function(a,c){a&&i(a),n(c)};this.requestRawWithCallback(t,r,s)})}requestRawWithCallback(t,r,n){let i;typeof r=="string"&&(t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let s=!1,a=(o,u)=>{s||(s=!0,n(o,u))},c=t.httpModule.request(t.options,o=>{let u=new et(o);a(null,u)});c.on("socket",o=>{i=o}),c.setTimeout(this._socketTimeout||3*6e4,()=>{i&&i.end(),a(new Error("Request timeout: "+t.options.path),null)}),c.on("error",function(o){a(o,null)}),r&&typeof r=="string"&&c.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){c.end()}),r.pipe(c)):c.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let i={};i.parsedUrl=r;let s=i.parsedUrl.protocol==="https:";i.httpModule=s?Ze:De;let a=s?443:80;return i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):a,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=t,i.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(i.options.headers["user-agent"]=this.userAgent),i.options.agent=this._getAgent(i.parsedUrl),this.handlers&&this.handlers.forEach(c=>{c.prepareRequest(i.options)}),i}_mergeHeaders(t){let r=n=>Object.keys(n).reduce((i,s)=>(i[s.toLowerCase()]=n[s],i),{});return this.requestOptions&&this.requestOptions.headers?Object.assign({},r(this.requestOptions.headers),r(t)):r(t||{})}_getExistingOrDefaultHeader(t,r,n){let i=a=>Object.keys(a).reduce((c,o)=>(c[o.toLowerCase()]=a[o],c),{}),s;return this.requestOptions&&this.requestOptions.headers&&(s=i(this.requestOptions.headers)[r]),t[r]||s||n}_getAgent(t){let r,n=fr.getProxyUrl(t),i=n&&n.hostname;if(this._keepAlive&&i&&(r=this._proxyAgent),this._keepAlive&&!i&&(r=this._agent),r)return r;let s=t.protocol==="https:",a=100;if(this.requestOptions&&(a=this.requestOptions.maxSockets||De.globalAgent.maxSockets),i){oe||(oe=lr());let c={maxSockets:a,keepAlive:this._keepAlive,proxy:Vt(Jt({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},o,u=n.protocol==="https:";s?o=u?oe.httpsOverHttps:oe.httpsOverHttp:o=u?oe.httpOverHttps:oe.httpOverHttp,r=o(c),this._proxyAgent=r}if(this._keepAlive&&!r){let c={keepAlive:this._keepAlive,maxSockets:a};r=s?new Ze.Agent(c):new De.Agent(c),this._agent=r}return r||(r=s?Ze.globalAgent:De.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){t=Math.min(Mi,t);let r=Li*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))}static dateTimeDeserializer(t,r){if(typeof r=="string"){let n=new Date(r);if(!isNaN(n.valueOf()))return n}return r}async _processResponse(t,r){return new Promise(async(n,i)=>{let s=t.message.statusCode,a={statusCode:s,result:null,headers:{}};s==M.NotFound&&n(a);let c,o;try{o=await t.readBody(),o&&o.length>0&&(r&&r.deserializeDates?c=JSON.parse(o,xe.dateTimeDeserializer):c=JSON.parse(o),a.result=c),a.headers=t.message.headers}catch{}if(s>299){let u;c&&c.message?u=c.message:o&&o.length>0?u=o:u="Failed request: ("+s+")";let l=new ye(u,s);l.result=a.result,i(l)}else n(a)})}};D.HttpClient=xe});var vr=w(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});var dr=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){t.headers.Authorization="Basic "+Buffer.from(this.username+":"+this.password).toString("base64")}canHandleAuthentication(t){return!1}handleAuthentication(t,r,n){return null}};_e.BasicCredentialHandler=dr;var pr=class{constructor(t){this.token=t}prepareRequest(t){t.headers.Authorization="Bearer "+this.token}canHandleAuthentication(t){return!1}handleAuthentication(t,r,n){return null}};_e.BearerCredentialHandler=pr;var mr=class{constructor(t){this.token=t}prepareRequest(t){t.headers.Authorization="Basic "+Buffer.from("PAT:"+this.token).toString("base64")}canHandleAuthentication(t){return!1}handleAuthentication(t,r,n){return null}};_e.PersonalAccessTokenCredentialHandler=mr});var _r=w(ce=>{"use strict";var gr=ce&&ce.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function o(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?s(l.value):i(l.value).then(c,o)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(ce,"__esModule",{value:!0});ce.OidcClient=void 0;var Bi=hr(),Gi=vr(),yr=Ce(),H=class{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new Bi.HttpClient("actions/oidc-client",[new Gi.BearerCredentialHandler(H.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return gr(this,void 0,void 0,function*(){let s=(r=(yield H.createHttpClient().getJson(t).catch(a=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${a.statusCode}
 
        Error Message: ${a.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return gr(this,void 0,void 0,function*(){try{let r=H.getIDTokenUrl();if(t){let i=encodeURIComponent(t);r=`${r}&audience=${i}`}yr.debug(`ID token url is ${r}`);let n=yield H.getCall(r);return yr.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};ce.OidcClient=H});var Ce=w(m=>{"use strict";var $i=m&&m.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Fi=m&&m.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wr=m&&m.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&$i(t,e,r);return Fi(t,e),t},Er=m&&m.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function o(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?s(l.value):i(l.value).then(c,o)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(m,"__esModule",{value:!0});m.getIDToken=m.getState=m.saveState=m.group=m.endGroup=m.startGroup=m.info=m.notice=m.warning=m.error=m.debug=m.isDebug=m.setFailed=m.setCommandEcho=m.setOutput=m.getBooleanInput=m.getMultilineInput=m.getInput=m.addPath=m.setSecret=m.exportVariable=m.ExitCode=void 0;var I=Zt(),br=rr(),Pe=Ne(),Ie=wr(require("os")),Ki=wr(require("path")),Wi=_r(),Sr;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Sr=m.ExitCode||(m.ExitCode={}));function zi(e,t){let r=Pe.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||""){let i="_GitHubActionsFileCommandDelimeter_",s=`${e}<<${i}${Ie.EOL}${r}${Ie.EOL}${i}`;br.issueCommand("ENV",s)}else I.issueCommand("set-env",{name:e},r)}m.exportVariable=zi;function Ji(e){I.issueCommand("add-mask",{},e)}m.setSecret=Ji;function Vi(e){process.env.GITHUB_PATH||""?br.issueCommand("PATH",e):I.issueCommand("add-path",{},e),process.env.PATH=`${e}${Ki.delimiter}${process.env.PATH}`}m.addPath=Vi;function tt(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}m.getInput=tt;function Qi(e,t){return tt(e,t).split(`
`).filter(n=>n!=="")}m.getMultilineInput=Qi;function Xi(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],i=tt(e,t);if(r.includes(i))return!0;if(n.includes(i))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}m.getBooleanInput=Xi;function Yi(e,t){process.stdout.write(Ie.EOL),I.issueCommand("set-output",{name:e},t)}m.setOutput=Yi;function Hi(e){I.issue("echo",e?"on":"off")}m.setCommandEcho=Hi;function Zi(e){process.exitCode=Sr.Failure,Or(e)}m.setFailed=Zi;function es(){return process.env.RUNNER_DEBUG==="1"}m.isDebug=es;function ts(e){I.issueCommand("debug",{},e)}m.debug=ts;function Or(e,t={}){I.issueCommand("error",Pe.toCommandProperties(t),e instanceof Error?e.toString():e)}m.error=Or;function rs(e,t={}){I.issueCommand("warning",Pe.toCommandProperties(t),e instanceof Error?e.toString():e)}m.warning=rs;function ns(e,t={}){I.issueCommand("notice",Pe.toCommandProperties(t),e instanceof Error?e.toString():e)}m.notice=ns;function is(e){process.stdout.write(e+Ie.EOL)}m.info=is;function Ar(e){I.issue("group",e)}m.startGroup=Ar;function kr(){I.issue("endgroup")}m.endGroup=kr;function ss(e,t){return Er(this,void 0,void 0,function*(){Ar(e);let r;try{r=yield t()}finally{kr()}return r})}m.group=ss;function as(e,t){I.issueCommand("save-state",{name:e},t)}m.saveState=as;function os(e){return process.env[`STATE_${e}`]||""}m.getState=os;function cs(e){return Er(this,void 0,void 0,function*(){return yield Wi.OidcClient.getIDToken(e)})}m.getIDToken=cs});var qr=w(rt=>{var Z=require("path"),V=process.platform==="win32",J=require("fs"),us=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function ls(){var e;if(us){var t=new Error;e=r}else e=n;return e;function r(i){i&&(t.message=i.message,i=t,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var s="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function fs(e){return typeof e=="function"?e:ls()}var $a=Z.normalize;V?$=/(.*?)(?:[\/\\]+|$)/g:$=/(.*?)(?:[\/]+|$)/g;var $;V?we=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:we=/^[\/]*/;var we;rt.realpathSync=function(t,r){if(t=Z.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];var n=t,i={},s={},a,c,o,u;l();function l(){var g=we.exec(t);a=g[0].length,c=g[0],o=g[0],u="",V&&!s[o]&&(J.lstatSync(o),s[o]=!0)}for(;a<t.length;){$.lastIndex=a;var h=$.exec(t);if(u=c,c+=h[0],o=u+h[1],a=$.lastIndex,!(s[o]||r&&r[o]===o)){var f;if(r&&Object.prototype.hasOwnProperty.call(r,o))f=r[o];else{var d=J.lstatSync(o);if(!d.isSymbolicLink()){s[o]=!0,r&&(r[o]=o);continue}var p=null;if(!V){var v=d.dev.toString(32)+":"+d.ino.toString(32);i.hasOwnProperty(v)&&(p=i[v])}p===null&&(J.statSync(o),p=J.readlinkSync(o)),f=Z.resolve(u,p),r&&(r[o]=f),V||(i[v]=p)}t=Z.resolve(f,t.slice(a)),l()}}return r&&(r[n]=t),t};rt.realpath=function(t,r,n){if(typeof n!="function"&&(n=fs(r),r=null),t=Z.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return process.nextTick(n.bind(null,null,r[t]));var i=t,s={},a={},c,o,u,l;h();function h(){var g=we.exec(t);c=g[0].length,o=g[0],u=g[0],l="",V&&!a[u]?J.lstat(u,function(_){if(_)return n(_);a[u]=!0,f()}):process.nextTick(f)}function f(){if(c>=t.length)return r&&(r[i]=t),n(null,t);$.lastIndex=c;var g=$.exec(t);return l=o,o+=g[0],u=l+g[1],c=$.lastIndex,a[u]||r&&r[u]===u?process.nextTick(f):r&&Object.prototype.hasOwnProperty.call(r,u)?v(r[u]):J.lstat(u,d)}function d(g,_){if(g)return n(g);if(!_.isSymbolicLink())return a[u]=!0,r&&(r[u]=u),process.nextTick(f);if(!V){var b=_.dev.toString(32)+":"+_.ino.toString(32);if(s.hasOwnProperty(b))return p(null,s[b],u)}J.stat(u,function(R){if(R)return n(R);J.readlink(u,function(O,j){V||(s[b]=j),p(O,j)})})}function p(g,_,b){if(g)return n(g);var R=Z.resolve(l,_);r&&(r[b]=R),v(R)}function v(g){t=Z.resolve(g,t.slice(c)),h()}}});var at=w((Ka,Ir)=>{Ir.exports=Q;Q.realpath=Q;Q.sync=st;Q.realpathSync=st;Q.monkeypatch=ds;Q.unmonkeypatch=ps;var ue=require("fs"),nt=ue.realpath,it=ue.realpathSync,hs=process.version,Dr=/^v[0-5]\./.test(hs),xr=qr();function Cr(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function Q(e,t,r){if(Dr)return nt(e,t,r);typeof t=="function"&&(r=t,t=null),nt(e,t,function(n,i){Cr(n)?xr.realpath(e,t,r):r(n,i)})}function st(e,t){if(Dr)return it(e,t);try{return it(e,t)}catch(r){if(Cr(r))return xr.realpathSync(e,t);throw r}}function ds(){ue.realpath=Q,ue.realpathSync=st}function ps(){ue.realpath=nt,ue.realpathSync=it}});var jr=w((Wa,Pr)=>{Pr.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=t(e[n],n);ms(i)?r.push.apply(r,i):r.push(i)}return r};var ms=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var Gr=w((za,Br)=>{"use strict";Br.exports=Lr;function Lr(e,t,r){e instanceof RegExp&&(e=Mr(e,r)),t instanceof RegExp&&(t=Mr(t,r));var n=Ur(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function Mr(e,t){var r=t.match(e);return r?r[0]:null}Lr.range=Ur;function Ur(e,t,r){var n,i,s,a,c,o=r.indexOf(e),u=r.indexOf(t,o+1),l=o;if(o>=0&&u>0){if(e===t)return[o,u];for(n=[],s=r.length;l>=0&&!c;)l==o?(n.push(l),o=r.indexOf(e,l+1)):n.length==1?c=[n.pop(),u]:(i=n.pop(),i<s&&(s=i,a=u),u=r.indexOf(t,l+1)),l=o<u&&o>=0?o:u;n.length&&(c=[s,a])}return c}});var Qr=w((Ja,Vr)=>{var vs=jr(),$r=Gr();Vr.exports=_s;var Fr="\0SLASH"+Math.random()+"\0",Kr="\0OPEN"+Math.random()+"\0",ct="\0CLOSE"+Math.random()+"\0",Wr="\0COMMA"+Math.random()+"\0",zr="\0PERIOD"+Math.random()+"\0";function ot(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function gs(e){return e.split("\\\\").join(Fr).split("\\{").join(Kr).split("\\}").join(ct).split("\\,").join(Wr).split("\\.").join(zr)}function ys(e){return e.split(Fr).join("\\").split(Kr).join("{").split(ct).join("}").split(Wr).join(",").split(zr).join(".")}function Jr(e){if(!e)return[""];var t=[],r=$r("{","}",e);if(!r)return e.split(",");var n=r.pre,i=r.body,s=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=Jr(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function _s(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),le(gs(e),!0).map(ys)):[]}function ws(e){return"{"+e+"}"}function Es(e){return/^-?0\d/.test(e)}function bs(e,t){return e<=t}function Ss(e,t){return e>=t}function le(e,t){var r=[],n=$r("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),a=i||s,c=n.body.indexOf(",")>=0;if(!a&&!c)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+ct+n.post,le(e)):[e];var o;if(a)o=n.body.split(/\.\./);else if(o=Jr(n.body),o.length===1&&(o=le(o[0],!1).map(ws),o.length===1)){var l=n.post.length?le(n.post,!1):[""];return l.map(function(ze){return n.pre+o[0]+ze})}var u=n.pre,l=n.post.length?le(n.post,!1):[""],h;if(a){var f=ot(o[0]),d=ot(o[1]),p=Math.max(o[0].length,o[1].length),v=o.length==3?Math.abs(ot(o[2])):1,g=bs,_=d<f;_&&(v*=-1,g=Ss);var b=o.some(Es);h=[];for(var R=f;g(R,d);R+=v){var O;if(s)O=String.fromCharCode(R),O==="\\"&&(O="");else if(O=String(R),b){var j=p-O.length;if(j>0){var ke=new Array(j+1).join("0");R<0?O="-"+ke+O.slice(1):O=ke+O}}h.push(O)}}else h=vs(o,function(Te){return le(Te,!1)});for(var ie=0;ie<h.length;ie++)for(var Y=0;Y<l.length;Y++){var B=u+h[ie]+l[Y];(!t||a||B)&&r.push(B)}return r}});var Me=w((Va,tn)=>{tn.exports=P;P.Minimatch=A;var Ee={sep:"/"};try{Ee=require("path")}catch{}var ft=P.GLOBSTAR=A.GLOBSTAR={},Os=Qr(),Xr={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},ut="[^/]",lt=ut+"*?",As="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ks="(?:(?!(?:\\/|^)\\.).)*?",Yr=Ts("().*{}+?[]^$\\!");function Ts(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var Zr=/\/+/;P.filter=Rs;function Rs(e,t){return t=t||{},function(r,n,i){return P(r,e,t)}}function Hr(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach(function(n){r[n]=t[n]}),Object.keys(e).forEach(function(n){r[n]=e[n]}),r}P.defaults=function(e){if(!e||!Object.keys(e).length)return P;var t=P,r=function(i,s,a){return t.minimatch(i,s,Hr(e,a))};return r.Minimatch=function(i,s){return new t.Minimatch(i,Hr(e,s))},r};A.defaults=function(e){return!e||!Object.keys(e).length?A:P.defaults(e).Minimatch};function P(e,t,r){if(typeof t!="string")throw new TypeError("glob pattern string required");return r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:t.trim()===""?e==="":new A(t,r).match(e)}function A(e,t){if(!(this instanceof A))return new A(e,t);if(typeof e!="string")throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),Ee.sep!=="/"&&(e=e.split(Ee.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}A.prototype.debug=function(){};A.prototype.make=Ns;function Ns(){if(!this._made){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(Zr)}),this.debug(this.pattern,r),r=r.map(function(n,i,s){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}}A.prototype.parseNegate=qs;function qs(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,s=e.length;i<s&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}P.braceExpand=function(e,t){return en(e,t)};A.prototype.braceExpand=en;function en(e,t){if(t||(this instanceof A?t=this.options:t={}),e=typeof e>"u"?this.pattern:e,typeof e>"u")throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:Os(e)}A.prototype.parse=Ds;var je={};function Ds(e,t){if(e.length>1024*64)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&e==="**")return ft;if(e==="")return"";var n="",i=!!r.nocase,s=!1,a=[],c=[],o,u=!1,l=-1,h=-1,f=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",d=this;function p(){if(o){switch(o){case"*":n+=lt,i=!0;break;case"?":n+=ut,i=!0;break;default:n+="\\"+o;break}d.debug("clearStateChar %j %j",o,n),o=!1}}for(var v=0,g=e.length,_;v<g&&(_=e.charAt(v));v++){if(this.debug("%s	%s %s %j",e,v,n,_),s&&Yr[_]){n+="\\"+_,s=!1;continue}switch(_){case"/":return!1;case"\\":p(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,v,n,_),u){this.debug("  in class"),_==="!"&&v===h+1&&(_="^"),n+=_;continue}d.debug("call clearStateChar %j",o),p(),o=_,r.noext&&p();continue;case"(":if(u){n+="(";continue}if(!o){n+="\\(";continue}a.push({type:o,start:v-1,reStart:n.length,open:Xr[o].open,close:Xr[o].close}),n+=o==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",o,n),o=!1;continue;case")":if(u||!a.length){n+="\\)";continue}p(),i=!0;var b=a.pop();n+=b.close,b.type==="!"&&c.push(b),b.reEnd=n.length;continue;case"|":if(u||!a.length||s){n+="\\|",s=!1;continue}p(),n+="|";continue;case"[":if(p(),u){n+="\\"+_;continue}u=!0,h=v,l=n.length,n+=_;continue;case"]":if(v===h+1||!u){n+="\\"+_,s=!1;continue}if(u){var R=e.substring(h+1,v);try{RegExp("["+R+"]")}catch{var O=this.parse(R,je);n=n.substr(0,l)+"\\["+O[0]+"\\]",i=i||O[1],u=!1;continue}}i=!0,u=!1,n+=_;continue;default:p(),s?s=!1:Yr[_]&&!(_==="^"&&u)&&(n+="\\"),n+=_}}for(u&&(R=e.substr(h+1),O=this.parse(R,je),n=n.substr(0,l)+"\\["+O[0],i=i||O[1]),b=a.pop();b;b=a.pop()){var j=n.slice(b.reStart+b.open.length);this.debug("setting tail",n,b),j=j.replace(/((?:\\{2}){0,64})(\\?)\|/g,function($t,Ft,Qe){return Qe||(Qe="\\"),Ft+Ft+Qe+"|"}),this.debug(`tail=%j
   %s`,j,j,b,n);var ke=b.type==="*"?lt:b.type==="?"?ut:"\\"+b.type;i=!0,n=n.slice(0,b.reStart)+ke+"\\("+j}p(),s&&(n+="\\\\");var ie=!1;switch(n.charAt(0)){case".":case"[":case"(":ie=!0}for(var Y=c.length-1;Y>-1;Y--){var B=c[Y],Te=n.slice(0,B.reStart),ze=n.slice(B.reStart,B.reEnd-8),Bt=n.slice(B.reEnd-8,B.reEnd),ge=n.slice(B.reEnd);Bt+=ge;var ei=Te.split("(").length-1,Je=ge;for(v=0;v<ei;v++)Je=Je.replace(/\)[+*?]?/,"");ge=Je;var Gt="";ge===""&&t!==je&&(Gt="$");var ti=Te+ze+ge+Gt+Bt;n=ti}if(n!==""&&i&&(n="(?=.)"+n),ie&&(n=f+n),t===je)return[n,i];if(!i)return Is(e);var ri=r.nocase?"i":"";try{var Ve=new RegExp("^"+n+"$",ri)}catch{return new RegExp("$.")}return Ve._glob=e,Ve._src=n,Ve}P.makeRe=function(e,t){return new A(e,t||{}).makeRe()};A.prototype.makeRe=xs;function xs(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?lt:t.dot?As:ks,n=t.nocase?"i":"",i=e.map(function(s){return s.map(function(a){return a===ft?r:typeof a=="string"?Ps(a):a._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}P.match=function(e,t,r){r=r||{};var n=new A(t,r);return e=e.filter(function(i){return n.match(i)}),n.options.nonull&&!e.length&&e.push(t),e};A.prototype.match=Cs;function Cs(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;var r=this.options;Ee.sep!=="/"&&(e=e.split(Ee.sep).join("/")),e=e.split(Zr),this.debug(this.pattern,"split",e);var n=this.set;this.debug(this.pattern,"set",n);var i,s;for(s=e.length-1;s>=0&&(i=e[s],!i);s--);for(s=0;s<n.length;s++){var a=n[s],c=e;r.matchBase&&a.length===1&&(c=[i]);var o=this.matchOne(c,a,t);if(o)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}A.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,a=e.length,c=t.length;i<a&&s<c;i++,s++){this.debug("matchOne loop");var o=t[s],u=e[i];if(this.debug(t,o,u),o===!1)return!1;if(o===ft){this.debug("GLOBSTAR",[t,o,u]);var l=i,h=s+1;if(h===c){for(this.debug("** at the end");i<a;i++)if(e[i]==="."||e[i]===".."||!n.dot&&e[i].charAt(0)===".")return!1;return!0}for(;l<a;){var f=e[l];if(this.debug(`
globstar while`,e,l,t,h,f),this.matchOne(e.slice(l),t.slice(h),r))return this.debug("globstar found match!",l,a,f),!0;if(f==="."||f===".."||!n.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,l,t,h);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,l,t,h),l===a))}var d;if(typeof o=="string"?(n.nocase?d=u.toLowerCase()===o.toLowerCase():d=u===o,this.debug("string match",o,u,d)):(d=u.match(o),this.debug("pattern match",o,u,d)),!d)return!1}if(i===a&&s===c)return!0;if(i===a)return r;if(s===c){var p=i===a-1&&e[i]==="";return p}throw new Error("wtf?")};function Is(e){return e.replace(/\\(.)/g,"$1")}function Ps(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var rn=w((Qa,ht)=>{typeof Object.create=="function"?ht.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ht.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}});var nn=w((Xa,pt)=>{try{if(dt=require("util"),typeof dt.inherits!="function")throw"";pt.exports=dt.inherits}catch{pt.exports=rn()}var dt});var Ue=w((Ya,Le)=>{"use strict";function sn(e){return e.charAt(0)==="/"}function an(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,r=t.exec(e),n=r[1]||"",i=Boolean(n&&n.charAt(1)!==":");return Boolean(r[2]||i)}Le.exports=process.platform==="win32"?an:sn;Le.exports.posix=sn;Le.exports.win32=an});var vt=w(X=>{X.setopts=Gs;X.ownProp=on;X.makeAbs=be;X.finish=$s;X.mark=Fs;X.isIgnored=un;X.childrenIgnored=Ks;function on(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var js=require("fs"),fe=require("path"),Ms=Me(),cn=Ue(),mt=Ms.Minimatch;function Ls(e,t){return e.localeCompare(t,"en")}function Us(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(Bs))}function Bs(e){var t=null;if(e.slice(-3)==="/**"){var r=e.replace(/(\/\*\*)+$/,"");t=new mt(r,{dot:!0})}return{matcher:new mt(e,{dot:!0}),gmatcher:t}}function Gs(e,t,r){if(r||(r={}),r.matchBase&&t.indexOf("/")===-1){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=r.strict!==!1,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.fs=r.fs||js,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),Us(e,r),e.changedCwd=!1;var n=process.cwd();on(r,"cwd")?(e.cwd=fe.resolve(r.cwd),e.changedCwd=e.cwd!==n):e.cwd=n,e.root=r.root||fe.resolve(e.cwd,"/"),e.root=fe.resolve(e.root),process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=cn(e.cwd)?e.cwd:be(e,e.cwd),process.platform==="win32"&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new mt(t,r),e.options=e.minimatch.options}function $s(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var s=e.matches[n];if(!s||Object.keys(s).length===0){if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}else{var c=Object.keys(s);t?r.push.apply(r,c):c.forEach(function(o){r[o]=!0})}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(Ls)),e.mark){for(var n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter(function(o){var u=!/\/$/.test(o),l=e.cache[o]||e.cache[be(e,o)];return u&&l&&(u=l!=="DIR"&&!Array.isArray(l)),u}))}e.ignore.length&&(r=r.filter(function(o){return!un(e,o)})),e.found=r}function Fs(e,t){var r=be(e,t),n=e.cache[r],i=t;if(n){var s=n==="DIR"||Array.isArray(n),a=t.slice(-1)==="/";if(s&&!a?i+="/":!s&&a&&(i=i.slice(0,-1)),i!==t){var c=be(e,i);e.statCache[c]=e.statCache[r],e.cache[c]=e.cache[r]}}return i}function be(e,t){var r=t;return t.charAt(0)==="/"?r=fe.join(e.root,t):cn(t)||t===""?r=t:e.changedCwd?r=fe.resolve(e.cwd,t):r=fe.resolve(t),process.platform==="win32"&&(r=r.replace(/\\/g,"/")),r}function un(e,t){return e.ignore.length?e.ignore.some(function(r){return r.matcher.match(t)||!!(r.gmatcher&&r.gmatcher.match(t))}):!1}function Ks(e,t){return e.ignore.length?e.ignore.some(function(r){return!!(r.gmatcher&&r.gmatcher.match(t))}):!1}});var pn=w((ro,dn)=>{dn.exports=hn;hn.GlobSync=S;var Ws=at(),ln=Me(),Za=ln.Minimatch,eo=_t().Glob,to=require("util"),gt=require("path"),fn=require("assert"),Be=Ue(),ee=vt(),zs=ee.setopts,yt=ee.ownProp,Js=ee.childrenIgnored,Vs=ee.isIgnored;function hn(e,t){if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new S(e,t).found}function S(e,t){if(!e)throw new Error("must provide pattern");if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof S))return new S(e,t);if(zs(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}S.prototype._finish=function(){if(fn(this instanceof S),this.realpath){var e=this;this.matches.forEach(function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i);var s=Ws.realpathSync(i,e.realpathCache);n[s]=!0}catch(a){if(a.syscall==="stat")n[e._makeAbs(i)]=!0;else throw a}})}ee.finish(this)};S.prototype._process=function(e,t,r){fn(this instanceof S);for(var n=0;typeof e[n]=="string";)n++;var i;switch(n){case e.length:this._processSimple(e.join("/"),t);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var s=e.slice(n),a;i===null?a=".":((Be(i)||Be(e.join("/")))&&(!i||!Be(i))&&(i="/"+i),a=i);var c=this._makeAbs(a);if(!Js(this,a)){var o=s[0]===ln.GLOBSTAR;o?this._processGlobStar(i,a,c,s,t,r):this._processReaddir(i,a,c,s,t,r)}};S.prototype._processReaddir=function(e,t,r,n,i,s){var a=this._readdir(r,s);if(!!a){for(var c=n[0],o=!!this.minimatch.negate,u=c._glob,l=this.dot||u.charAt(0)===".",h=[],f=0;f<a.length;f++){var d=a[f];if(d.charAt(0)!=="."||l){var p;o&&!e?p=!d.match(c):p=d.match(c),p&&h.push(d)}}var v=h.length;if(v!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var f=0;f<v;f++){var d=h[f];e&&(e.slice(-1)!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=gt.join(this.root,d)),this._emitMatch(i,d)}return}n.shift();for(var f=0;f<v;f++){var d=h[f],g;e?g=[e,d]:g=[d],this._process(g.concat(n),i,s)}}}};S.prototype._emitMatch=function(e,t){if(!Vs(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}};S.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r,n;try{r=this.fs.lstatSync(e)}catch(s){if(s.code==="ENOENT")return null}var i=r&&r.isSymbolicLink();return this.symlinks[e]=i,!i&&r&&!r.isDirectory()?this.cache[e]="FILE":t=this._readdir(e,!1),t};S.prototype._readdir=function(e,t){var r;if(t&&!yt(this.symlinks,e))return this._readdirInGlobStar(e);if(yt(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};S.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t};S.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t);break}};S.prototype._processGlobStar=function(e,t,r,n,i,s){var a=this._readdir(r,s);if(!!a){var c=n.slice(1),o=e?[e]:[],u=o.concat(c);this._process(u,i,!1);var l=a.length,h=this.symlinks[r];if(!(h&&s))for(var f=0;f<l;f++){var d=a[f];if(!(d.charAt(0)==="."&&!this.dot)){var p=o.concat(a[f],c);this._process(p,i,!0);var v=o.concat(a[f],n);this._process(v,i,!0)}}}};S.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),!!r){if(e&&Be(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=gt.join(this.root,e):(e=gt.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}};S.prototype._stat=function(e){var t=this._makeAbs(e),r=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&yt(this.cache,t)){var a=this.cache[t];if(Array.isArray(a)&&(a="DIR"),!r||a==="DIR")return a;if(r&&a==="FILE")return!1}var n,i=this.statCache[t];if(!i){var s;try{s=this.fs.lstatSync(t)}catch(c){if(c&&(c.code==="ENOENT"||c.code==="ENOTDIR"))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{i=this.fs.statSync(t)}catch{i=s}else i=s}this.statCache[t]=i;var a=!0;return i&&(a=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||a,r&&a==="FILE"?!1:a};S.prototype._mark=function(e){return ee.mark(this,e)};S.prototype._makeAbs=function(e){return ee.makeAbs(this,e)}});var wt=w((no,vn)=>{vn.exports=mn;function mn(e,t){if(e&&t)return mn(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var s=e.apply(this,n),a=n[n.length-1];return typeof s=="function"&&s!==a&&Object.keys(a).forEach(function(c){s[c]=a[c]}),s}}});var bt=w((io,Et)=>{var gn=wt();Et.exports=gn(Ge);Et.exports.strict=gn(yn);Ge.proto=Ge(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ge(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return yn(this)},configurable:!0})});function Ge(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function yn(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}});var wn=w((so,_n)=>{var Qs=wt(),Se=Object.create(null),Xs=bt();_n.exports=Qs(Ys);function Ys(e,t){return Se[e]?(Se[e].push(t),null):(Se[e]=[t],Hs(e))}function Hs(e){return Xs(function t(){var r=Se[e],n=r.length,i=Zs(arguments);try{for(var s=0;s<n;s++)r[s].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick(function(){t.apply(null,i)})):delete Se[e]}})}function Zs(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}});var _t=w((co,bn)=>{bn.exports=te;var ea=at(),En=Me(),ao=En.Minimatch,ta=nn(),ra=require("events").EventEmitter,St=require("path"),Ot=require("assert"),Oe=Ue(),kt=pn(),re=vt(),na=re.setopts,At=re.ownProp,Tt=wn(),oo=require("util"),ia=re.childrenIgnored,sa=re.isIgnored,aa=bt();function te(e,t,r){if(typeof t=="function"&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return kt(e,t)}return new y(e,t,r)}te.sync=kt;var oa=te.GlobSync=kt.GlobSync;te.glob=te;function ca(e,t){if(t===null||typeof t!="object")return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}te.hasMagic=function(e,t){var r=ca({},t);r.noprocess=!0;var n=new y(e,r),i=n.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var s=0;s<i[0].length;s++)if(typeof i[0][s]!="string")return!0;return!1};te.Glob=y;ta(y,ra);function y(e,t,r){if(typeof t=="function"&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new oa(e,t)}if(!(this instanceof y))return new y(e,t,r);na(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof r=="function"&&(r=aa(r),this.on("error",r),this.on("end",function(o){r(null,o)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return c();for(var s=!0,a=0;a<n;a++)this._process(this.minimatch.set[a],a,!1,c);s=!1;function c(){--i._processing,i._processing<=0&&(s?process.nextTick(function(){i._finish()}):i._finish())}}y.prototype._finish=function(){if(Ot(this instanceof y),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();re.finish(this),this.emit("end",this.found)}};y.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n);function n(){--e===0&&t._finish()}};y.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,s=n.length;if(s===0)return t();var a=this.matches[e]=Object.create(null);n.forEach(function(c,o){c=i._makeAbs(c),ea.realpath(c,i.realpathCache,function(u,l){u?u.syscall==="stat"?a[c]=!0:i.emit("error",u):a[l]=!0,--s===0&&(i.matches[e]=a,t())})})};y.prototype._mark=function(e){return re.mark(this,e)};y.prototype._makeAbs=function(e){return re.makeAbs(this,e)};y.prototype.abort=function(){this.aborted=!0,this.emit("abort")};y.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};y.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};y.prototype._process=function(e,t,r,n){if(Ot(this instanceof y),Ot(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,t,r,n]);return}for(var i=0;typeof e[i]=="string";)i++;var s;switch(i){case e.length:this._processSimple(e.join("/"),t,n);return;case 0:s=null;break;default:s=e.slice(0,i).join("/");break}var a=e.slice(i),c;s===null?c=".":((Oe(s)||Oe(e.join("/")))&&(!s||!Oe(s))&&(s="/"+s),c=s);var o=this._makeAbs(c);if(ia(this,c))return n();var u=a[0]===En.GLOBSTAR;u?this._processGlobStar(s,c,o,a,t,r,n):this._processReaddir(s,c,o,a,t,r,n)}};y.prototype._processReaddir=function(e,t,r,n,i,s,a){var c=this;this._readdir(r,s,function(o,u){return c._processReaddir2(e,t,r,n,i,s,u,a)})};y.prototype._processReaddir2=function(e,t,r,n,i,s,a,c){if(!a)return c();for(var o=n[0],u=!!this.minimatch.negate,l=o._glob,h=this.dot||l.charAt(0)===".",f=[],d=0;d<a.length;d++){var p=a[d];if(p.charAt(0)!=="."||h){var v;u&&!e?v=!p.match(o):v=p.match(o),v&&f.push(p)}}var g=f.length;if(g===0)return c();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var d=0;d<g;d++){var p=f[d];e&&(e!=="/"?p=e+"/"+p:p=e+p),p.charAt(0)==="/"&&!this.nomount&&(p=St.join(this.root,p)),this._emitMatch(i,p)}return c()}n.shift();for(var d=0;d<g;d++){var p=f[d],_;e&&(e!=="/"?p=e+"/"+p:p=e+p),this._process([p].concat(n),i,s,c)}c()};y.prototype._emitMatch=function(e,t){if(!this.aborted&&!sa(this,t)){if(this.paused){this._emitQueue.push([e,t]);return}var r=Oe(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}};y.prototype._readdirInGlobStar=function(e,t){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,t);var r="lstat\0"+e,n=this,i=Tt(r,s);i&&n.fs.lstat(e,i);function s(a,c){if(a&&a.code==="ENOENT")return t();var o=c&&c.isSymbolicLink();n.symlinks[e]=o,!o&&c&&!c.isDirectory()?(n.cache[e]="FILE",t()):n._readdir(e,!1,t)}};y.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=Tt("readdir\0"+e+"\0"+t,r),!!r)){if(t&&!At(this.symlinks,e))return this._readdirInGlobStar(e,r);if(At(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return r();if(Array.isArray(n))return r(null,n)}var i=this;i.fs.readdir(e,ua(this,e,r))}};function ua(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}y.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}};y.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t);break}return r()}};y.prototype._processGlobStar=function(e,t,r,n,i,s,a){var c=this;this._readdir(r,s,function(o,u){c._processGlobStar2(e,t,r,n,i,s,u,a)})};y.prototype._processGlobStar2=function(e,t,r,n,i,s,a,c){if(!a)return c();var o=n.slice(1),u=e?[e]:[],l=u.concat(o);this._process(l,i,!1,c);var h=this.symlinks[r],f=a.length;if(h&&s)return c();for(var d=0;d<f;d++){var p=a[d];if(!(p.charAt(0)==="."&&!this.dot)){var v=u.concat(a[d],o);this._process(v,i,!0,c);var g=u.concat(a[d],n);this._process(g,i,!0,c)}}c()};y.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,function(i,s){n._processSimple2(e,t,i,s,r)})};y.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&Oe(e)&&!this.nomount){var s=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=St.join(this.root,e):(e=St.resolve(this.root,e),s&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()};y.prototype._stat=function(e,t){var r=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return t();if(!this.stat&&At(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return t(null,i);if(n&&i==="FILE")return t()}var s,a=this.statCache[r];if(a!==void 0){if(a===!1)return t(null,a);var c=a.isDirectory()?"DIR":"FILE";return n&&c==="FILE"?t():t(null,c,a)}var o=this,u=Tt("stat\0"+r,l);u&&o.fs.lstat(r,u);function l(h,f){if(f&&f.isSymbolicLink())return o.fs.stat(r,function(d,p){d?o._stat2(e,r,null,f,t):o._stat2(e,r,d,p,t)});o._stat2(e,r,h,f,t)}};y.prototype._stat2=function(e,t,r,n,i){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[t]=!1,i();var s=e.slice(-1)==="/";if(this.statCache[t]=n,t.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var a=!0;return n&&(a=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||a,s&&a==="FILE"?i():i(null,a,n)}});var qn=w((uo,Nn)=>{var E=require("assert"),kn=require("path"),Sn=require("fs"),he;try{he=_t()}catch{}var la={nosort:!0,silent:!0},Rt=0,Ae=process.platform==="win32",Tn=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Sn[r],r=r+"Sync",e[r]=e[r]||Sn[r]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,e.glob===!1&&(e.disableGlob=!0),e.disableGlob!==!0&&he===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||la},qt=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),E(e,"rimraf: missing path"),E.equal(typeof e,"string","rimraf: path should be a string"),E.equal(typeof r,"function","rimraf: callback function required"),E(t,"rimraf: invalid options argument provided"),E.equal(typeof t,"object","rimraf: options should be object"),Tn(t);let n=0,i=null,s=0,a=o=>{i=i||o,--s===0&&r(i)},c=(o,u)=>{if(o)return r(o);if(s=u.length,s===0)return r();u.forEach(l=>{let h=f=>{if(f){if((f.code==="EBUSY"||f.code==="ENOTEMPTY"||f.code==="EPERM")&&n<t.maxBusyTries)return n++,setTimeout(()=>Nt(l,t,h),n*100);if(f.code==="EMFILE"&&Rt<t.emfileWait)return setTimeout(()=>Nt(l,t,h),Rt++);f.code==="ENOENT"&&(f=null)}Rt=0,a(f)};Nt(l,t,h)})};if(t.disableGlob||!he.hasMagic(e))return c(null,[e]);t.lstat(e,(o,u)=>{if(!o)return c(null,[e]);he(e,t.glob,c)})},Nt=(e,t,r)=>{E(e),E(t),E(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Ae&&On(e,t,n,r),i&&i.isDirectory())return $e(e,t,n,r);t.unlink(e,s=>{if(s){if(s.code==="ENOENT")return r(null);if(s.code==="EPERM")return Ae?On(e,t,s,r):$e(e,t,s,r);if(s.code==="EISDIR")return $e(e,t,s,r)}return r(s)})})},On=(e,t,r,n)=>{E(e),E(t),E(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(s,a)=>{s?n(s.code==="ENOENT"?null:r):a.isDirectory()?$e(e,t,r,n):t.unlink(e,n)})})},An=(e,t,r)=>{E(e),E(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}let n;try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?Fe(e,t,r):t.unlinkSync(e)},$e=(e,t,r,n)=>{E(e),E(t),E(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?fa(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})},fa=(e,t,r)=>{E(e),E(t),E(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let s=i.length;if(s===0)return t.rmdir(e,r);let a;i.forEach(c=>{qt(kn.join(e,c),t,o=>{if(!a){if(o)return r(a=o);--s===0&&t.rmdir(e,r)}})})})},Rn=(e,t)=>{t=t||{},Tn(t),E(e,"rimraf: missing path"),E.equal(typeof e,"string","rimraf: path should be a string"),E(t,"rimraf: missing options"),E.equal(typeof t,"object","rimraf: options should be object");let r;if(t.disableGlob||!he.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch{r=he.sync(e,t.glob)}if(!!r.length)for(let n=0;n<r.length;n++){let i=r[n],s;try{s=t.lstatSync(i)}catch(a){if(a.code==="ENOENT")return;a.code==="EPERM"&&Ae&&An(i,t,a)}try{s&&s.isDirectory()?Fe(i,t,null):t.unlinkSync(i)}catch(a){if(a.code==="ENOENT")return;if(a.code==="EPERM")return Ae?An(i,t,a):Fe(i,t,a);if(a.code!=="EISDIR")throw a;Fe(i,t,a)}}},Fe=(e,t,r)=>{E(e),E(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR")throw r;(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")&&ha(e,t)}},ha=(e,t)=>{E(e),E(t),t.readdirSync(e).forEach(i=>Rn(kn.join(e,i),t));let r=Ae?100:1,n=0;do{let i=!0;try{let s=t.rmdirSync(e,t);return i=!1,s}finally{if(++n<r&&i)continue}}while(!0)};Nn.exports=qt;qt.sync=Rn});var Vn=w((lo,F)=>{var k=require("fs"),Pt=require("os"),x=require("path"),Dn=require("crypto"),U={fs:k.constants,os:Pt.constants},In=qn(),xn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Pn=/XXXXXX/,da=3,jn=(U.O_CREAT||U.fs.O_CREAT)|(U.O_EXCL||U.fs.O_EXCL)|(U.O_RDWR||U.fs.O_RDWR),pa=Pt.platform()==="win32",ma=U.EBADF||U.os.errno.EBADF,va=U.ENOENT||U.os.errno.ENOENT,Mn=448,Ln=384,ga="exit",de=[],Un=k.rmdirSync.bind(k),Bn=In.sync,Gn=!1;function jt(e,t){let r=pe(e,t),n=r[0],i=r[1];try{Wn(n)}catch(a){return i(a)}let s=n.tries;(function a(){try{let c=Kn(n);k.stat(c,function(o){if(!o)return s-- >0?a():i(new Error("Could not get a unique tmp filename, max tries reached "+c));i(null,c)})}catch(c){i(c)}})()}function Mt(e){let t=pe(e),r=t[0];Wn(r);let n=r.tries;do{let i=Kn(r);try{k.statSync(i)}catch{return i}}while(n-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function ya(e,t){let r=pe(e,t),n=r[0],i=r[1];jt(n,function(a,c){if(a)return i(a);k.open(c,jn,n.mode||Ln,function(u,l){if(u)return i(u);if(n.discardDescriptor)return k.close(l,function(f){return i(f,c,void 0,xt(c,-1,n,!1))});{let h=n.discardDescriptor||n.detachDescriptor;i(null,c,l,xt(c,h?-1:l,n,!1))}})})}function _a(e){let t=pe(e),r=t[0],n=r.discardDescriptor||r.detachDescriptor,i=Mt(r);var s=k.openSync(i,jn,r.mode||Ln);return r.discardDescriptor&&(k.closeSync(s),s=void 0),{name:i,fd:s,removeCallback:xt(i,n?-1:s,r,!0)}}function wa(e,t){let r=pe(e,t),n=r[0],i=r[1];jt(n,function(a,c){if(a)return i(a);k.mkdir(c,n.mode||Mn,function(u){if(u)return i(u);i(null,c,$n(c,n,!1))})})}function Ea(e){let t=pe(e),r=t[0],n=Mt(r);return k.mkdirSync(n,r.mode||Mn),{name:n,removeCallback:$n(n,r,!0)}}function ba(e,t){let r=function(n){if(n&&!It(n))return t(n);t()};0<=e[0]?k.close(e[0],function(){k.unlink(e[1],r)}):k.unlink(e[1],r)}function Sa(e){let t=null;try{0<=e[0]&&k.closeSync(e[0])}catch(r){if(!Aa(r)&&!It(r))throw r}finally{try{k.unlinkSync(e[1])}catch(r){It(r)||(t=r)}}if(t!==null)throw t}function xt(e,t,r,n){let i=Ke(Sa,[t,e],n),s=Ke(ba,[t,e],n,i);return r.keep||de.unshift(i),n?i:s}function $n(e,t,r){let n=t.unsafeCleanup?In:k.rmdir.bind(k),i=t.unsafeCleanup?Bn:Un,s=Ke(i,e,r),a=Ke(n,e,r,s);return t.keep||de.unshift(s),r?s:a}function Ke(e,t,r,n){let i=!1;return function s(a){if(!i){let c=n||s,o=de.indexOf(c);return o>=0&&de.splice(o,1),i=!0,r||e===Un||e===Bn?e(t):e(t,a||function(){})}}}function Oa(){if(!!Gn)for(;de.length;)try{de[0]()}catch{}}function Cn(e){let t=[],r=null;try{r=Dn.randomBytes(e)}catch{r=Dn.pseudoRandomBytes(e)}for(var n=0;n<e;n++)t.push(xn[r[n]%xn.length]);return t.join("")}function Fn(e){return e===null||q(e)||!e.trim()}function q(e){return typeof e>"u"}function pe(e,t){if(typeof e=="function")return[{},e];if(q(e))return[{},t];let r={};for(let n of Object.getOwnPropertyNames(e))r[n]=e[n];return[r,t]}function Kn(e){let t=e.tmpdir;if(!q(e.name))return x.join(t,e.dir,e.name);if(!q(e.template))return x.join(t,e.dir,e.template).replace(Pn,Cn(6));let r=[e.prefix?e.prefix:"tmp","-",process.pid,"-",Cn(12),e.postfix?"-"+e.postfix:""].join("");return x.join(t,e.dir,r)}function Wn(e){e.tmpdir=Jn(e);let t=e.tmpdir;if(q(e.name)||Dt(e.name,"name",t),q(e.dir)||Dt(e.dir,"dir",t),!q(e.template)&&(Dt(e.template,"template",t),!e.template.match(Pn)))throw new Error(`Invalid template, found "${e.template}".`);if(!q(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=q(e.name)?e.tries||da:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.dir=q(e.dir)?"":x.relative(t,Ct(e.dir,t)),e.template=q(e.template)?void 0:x.relative(t,Ct(e.template,t)),e.template=Fn(e.template)?void 0:x.relative(e.dir,e.template),e.name=q(e.name)?void 0:Lt(e.name),e.prefix=q(e.prefix)?"":e.prefix,e.postfix=q(e.postfix)?"":e.postfix}function Ct(e,t){let r=Lt(e);return r.startsWith(t)?x.resolve(r):x.resolve(x.join(t,r))}function Lt(e){return Fn(e)?e:e.replace(/["']/g,"")}function Dt(e,t,r){if(t==="name"){if(x.isAbsolute(e))throw new Error(`${t} option must not contain an absolute path, found "${e}".`);let n=x.basename(e);if(n===".."||n==="."||n!==e)throw new Error(`${t} option must not contain a path, found "${e}".`)}else{if(x.isAbsolute(e)&&!e.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${e}".`);let n=Ct(e,r);if(!n.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${n}".`)}}function Aa(e){return zn(e,-ma,"EBADF")}function It(e){return zn(e,-va,"ENOENT")}function zn(e,t,r){return pa?e.code===r:e.code===r&&e.errno===t}function ka(){Gn=!0}function Jn(e){return x.resolve(Lt(e&&e.tmpdir||Pt.tmpdir()))}process.addListener(ga,Oa);Object.defineProperty(F.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return Jn()}});F.exports.dir=wa;F.exports.dirSync=Ea;F.exports.file=ya;F.exports.fileSync=_a;F.exports.tmpName=jt;F.exports.tmpNameSync=Mt;F.exports.setGracefulCleanup=ka});var T=Re(Ce()),Hn=require("child_process"),Zn=require("fs/promises"),ne=require("process");var Tr=require("child_process"),Rr="tempdir",Nr="systemd";function z(e,t){let r=(0,Tr.spawn)("sudo",e,{stdio:["ignore","ignore",t?.ignoreStderr?"ignore":"inherit"]});return new Promise((n,i)=>{r.on("close",s=>{s===0?n():i(new Error(e[0]+" exited with "+s))})})}var me=Re(Ce()),ve=require("fs/promises"),We=Re(require("path")),Qn=Re(Vn());async function Xn(e){let{substituters:t,trustedPublicKeys:r,secretKeys:n,awsAccessKeyId:i,awsSecretAccessKey:s}=e,a="extra-substituters = "+t.join(" ")+`
`;r&&(a+="extra-trusted-public-keys = "+r.join(" ")+`
`);let c=null,o=null;try{let u=i&&s;if((n||u)&&(c=await new Promise((l,h)=>{(0,Qn.dir)({keep:!0,prefix:"setup-nix-cache-action"},(d,p)=>{d?h(d):l(p)})}),u&&(o=We.join(c,"aws-credentials"),await(0,ve.writeFile)(o,`[default]
aws_access_key_id = ${i}
aws_secret_access_key = ${s}
`,{mode:384}),(0,me.debug)("Wrote "+o)),n)){let l=[];for(let d=0;d<n.length;d++){let p=n[d],v=We.join(c,"secret-key"+d);await(0,ve.writeFile)(v,p,{mode:384}),(0,me.debug)("Wrote "+v),l.push(v)}a+="extra-secret-key-files = "+l.join(" ")+`
`;let h=`#!/bin/bash
set -euo pipefail
echo "Uploading paths: $OUT_PATHS" 1>&2
`;u&&(h+=`export AWS_SHARED_CREDENTIALS_FILE='${o}'
`),h+=`echo "$OUT_PATHS" | xargs /nix/var/nix/profiles/default/bin/nix \\
  --extra-experimental-features nix-command \\
  copy --to '${t[0]}' 1>&2
`;let f=We.join(c,"post-build-hook");await(0,ve.writeFile)(f,h,{mode:493}),(0,me.debug)("Wrote "+f),a+="post-build-hook = "+f+`
`}return{config:a,tempDir:c,credsPath:o}}catch(u){throw c&&await(0,ve.rm)(c,{recursive:!0,force:!0}).catch(l=>{(0,me.warning)(l)}),u}}async function Yn(e,t,r){let n=r?.append?["tee","-a",e]:["tee",e],i=(0,Hn.spawn)("sudo",n,{stdio:["pipe","ignore","inherit"]}),s=new Promise((a,c)=>{i.on("close",o=>{o===0?a():c(new Error("tee exited with "+o))})});try{await new Promise((a,c)=>{i.stdin.write(t,o=>{o?c(o):a()})}),await new Promise(a=>{i.stdin.end(a)})}catch(a){throw i.kill(),a}finally{await s}}async function Ta(){if(ne.platform==="linux"){if(!await z(["systemctl","cat","nix-daemon.service"],{ignoreStderr:!0}).then(()=>!0,()=>!1))return;(0,T.info)("Restarting Nix daemon..."),await z(["systemctl","daemon-reload"]),await z(["systemctl","restart","nix-daemon.service"])}else if(ne.platform==="darwin"){if(!await(0,Zn.stat)("/Library/LaunchDaemons/org.nixos.nix-daemon.plist").then(()=>!0,()=>!1))return;(0,T.info)("Restarting Nix daemon..."),await z(["launchctl","kickstart","-k","system/org.nixos.nix-daemon"])}else throw new Error("cannot restart Nix daemon on unknown platform "+ne.platform)}function Ut(e){return e=e.trim(),e?e.split(/\s+/):[]}(async()=>{try{(0,T.info)("Generating configuration...");let{config:e,tempDir:t,credsPath:r}=await Xn({substituters:Ut((0,T.getInput)("substituters",{required:!0})),trustedPublicKeys:Ut((0,T.getInput)("trusted_public_keys")),secretKeys:Ut((0,T.getInput)("secret_keys")),awsAccessKeyId:(0,T.getInput)("aws_access_key_id"),awsSecretAccessKey:(0,T.getInput)("aws_secret_access_key")});if(t&&(z(["chown","-R","root:root",t]),(0,T.saveState)(Rr,t)),(0,T.info)("Saving configuration..."),await z(["mkdir","-p","/etc/nix"]),await Yn("/etc/nix/nix.conf",e,{append:!0}),r&&ne.platform==="linux"){if(ne.platform!=="linux")throw new Error("Private substituters not supported on "+ne.platform);await z(["mkdir","-p","/etc/systemd/system/nix-daemon.service.d"]);let n="/etc/systemd/system/nix-daemon.service.d/aws-credentials.conf";await Yn(n,`[Service]
Environment=AWS_SHARED_CREDENTIALS_FILE=`+r+`
`),(0,T.saveState)(Nr,n)}await Ta(),(0,T.info)("Done!")}catch(e){e instanceof Error?(0,T.setFailed)(e.message):(0,T.setFailed)(e+"")}})();
/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
/**
@license
Copyright 2022 Ross Light

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

SPDX-License-Identifier: Apache-2.0
**/
