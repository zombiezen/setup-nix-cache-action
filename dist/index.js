"use strict";var ts=Object.create;var Le=Object.defineProperty;var rs=Object.getOwnPropertyDescriptor;var ns=Object.getOwnPropertyNames;var is=Object.getPrototypeOf,ss=Object.prototype.hasOwnProperty;var q=(e,t)=>()=>(e&&(t=e(e=0)),t);var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),as=(e,t)=>{for(var r in t)Le(e,r,{get:t[r],enumerable:!0})},Or=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ns(t))!ss.call(e,i)&&i!==r&&Le(e,i,{get:()=>t[i],enumerable:!(n=rs(t,i))||n.enumerable});return e};var ae=(e,t,r)=>(r=e!=null?ts(is(e)):{},Or(t||!e||!e.__esModule?Le(r,"default",{value:e,enumerable:!0}):r,e)),os=e=>Or(Le({},"__esModule",{value:!0}),e);var Be=w(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.toCommandProperties=pe.toCommandValue=void 0;function us(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}pe.toCommandValue=us;function cs(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}pe.toCommandProperties=cs});var Tr=w(U=>{"use strict";var ls=U&&U.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),fs=U&&U.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hs=U&&U.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&ls(t,e,r);return fs(t,e),t};Object.defineProperty(U,"__esModule",{value:!0});U.issue=U.issueCommand=void 0;var ds=hs(require("os")),Ar=Be();function Rr(e,t,r){let n=new ht(e,t,r);process.stdout.write(n.toString()+ds.EOL)}U.issueCommand=Rr;function ps(e,t=""){Rr(e,{},t)}U.issue=ps;var Sr="::",ht=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=Sr+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let i=this.properties[n];i&&(r?r=!1:t+=",",t+=`${n}=${vs(i)}`)}}return t+=`${Sr}${ms(this.message)}`,t}};function ms(e){return Ar.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function vs(e){return Ar.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function ke(){return $e>Ge.length-16&&(kr.default.randomFillSync(Ge),$e=0),Ge.slice($e,$e+=16)}var kr,Ge,$e,dt=q(()=>{kr=ae(require("crypto")),Ge=new Uint8Array(256),$e=Ge.length});var xr,Pr=q(()=>{xr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function gs(e){return typeof e=="string"&&xr.test(e)}var H,xe=q(()=>{Pr();H=gs});function ys(e,t=0){let r=(P[e[t+0]]+P[e[t+1]]+P[e[t+2]]+P[e[t+3]]+"-"+P[e[t+4]]+P[e[t+5]]+"-"+P[e[t+6]]+P[e[t+7]]+"-"+P[e[t+8]]+P[e[t+9]]+"-"+P[e[t+10]]+P[e[t+11]]+P[e[t+12]]+P[e[t+13]]+P[e[t+14]]+P[e[t+15]]).toLowerCase();if(!H(r))throw TypeError("Stringified UUID is invalid");return r}var P,Q,Pe=q(()=>{xe();P=[];for(let e=0;e<256;++e)P.push((e+256).toString(16).substr(1));Q=ys});function _s(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let s=e.node||Nr,a=e.clockseq!==void 0?e.clockseq:pt;if(s==null||a==null){let f=e.random||(e.rng||ke)();s==null&&(s=Nr=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),a==null&&(a=pt=(f[6]<<8|f[7])&16383)}let u=e.msecs!==void 0?e.msecs:Date.now(),o=e.nsecs!==void 0?e.nsecs:vt+1,c=u-mt+(o-vt)/1e4;if(c<0&&e.clockseq===void 0&&(a=a+1&16383),(c<0||u>mt)&&e.nsecs===void 0&&(o=0),o>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");mt=u,vt=o,pt=a,u+=122192928e5;let l=((u&268435455)*1e4+o)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;let h=u/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let f=0;f<6;++f)i[n+f]=s[f];return t||Q(i)}var Nr,pt,mt,vt,qr,Dr=q(()=>{dt();Pe();mt=0,vt=0;qr=_s});function ws(e){if(!H(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Fe,gt=q(()=>{xe();Fe=ws});function Es(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function Ve(e,t,r){function n(i,s,a,u){if(typeof i=="string"&&(i=Es(i)),typeof s=="string"&&(s=Fe(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+i.length);if(o.set(s),o.set(i,s.length),o=r(o),o[6]=o[6]&15|t,o[8]=o[8]&63|128,a){u=u||0;for(let c=0;c<16;++c)a[u+c]=o[c];return a}return Q(o)}try{n.name=e}catch{}return n.DNS=bs,n.URL=Os,n}var bs,Os,yt=q(()=>{Pe();gt();bs="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Os="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Ss(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Cr.default.createHash("md5").update(e).digest()}var Cr,Ir,jr=q(()=>{Cr=ae(require("crypto"));Ir=Ss});var As,Mr,Ur=q(()=>{yt();jr();As=Ve("v3",48,Ir),Mr=As});function Rs(e,t,r){e=e||{};let n=e.random||(e.rng||ke)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return Q(n)}var Lr,Br=q(()=>{dt();Pe();Lr=Rs});function Ts(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),$r.default.createHash("sha1").update(e).digest()}var $r,Gr,Fr=q(()=>{$r=ae(require("crypto"));Gr=Ts});var ks,Vr,Kr=q(()=>{yt();Fr();ks=Ve("v5",80,Gr),Vr=ks});var Wr,zr=q(()=>{Wr="00000000-0000-0000-0000-000000000000"});function xs(e){if(!H(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Jr,Yr=q(()=>{xe();Jr=xs});var Hr={};as(Hr,{NIL:()=>Wr,parse:()=>Fe,stringify:()=>Q,v1:()=>qr,v3:()=>Mr,v4:()=>Lr,v5:()=>Vr,validate:()=>H,version:()=>Jr});var Qr=q(()=>{Dr();Ur();Br();Kr();zr();Yr();xe();Pe();gt()});var tn=w(L=>{"use strict";var Ps=L&&L.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ns=L&&L.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Zr=L&&L.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Ps(t,e,r);return Ns(t,e),t};Object.defineProperty(L,"__esModule",{value:!0});L.prepareKeyValueMessage=L.issueFileCommand=void 0;var Xr=Zr(require("fs")),_t=Zr(require("os")),qs=(Qr(),os(Hr)),en=Be();function Ds(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!Xr.existsSync(r))throw new Error(`Missing file at path: ${r}`);Xr.appendFileSync(r,`${en.toCommandValue(t)}${_t.EOL}`,{encoding:"utf8"})}L.issueFileCommand=Ds;function Cs(e,t){let r=`ghadelimiter_${qs.v4()}`,n=en.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${_t.EOL}${n}${_t.EOL}${r}`}L.prepareKeyValueMessage=Cs});var nn=w(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.checkBypass=me.getProxyUrl=void 0;function Is(e){let t=e.protocol==="https:";if(rn(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}me.getProxyUrl=Is;function rn(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let i of t.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(n.some(s=>s===i))return!0;return!1}me.checkBypass=rn});var un=w(ve=>{"use strict";var Gu=require("net"),js=require("tls"),wt=require("http"),sn=require("https"),Ms=require("events"),Fu=require("assert"),Us=require("util");ve.httpOverHttp=Ls;ve.httpsOverHttp=Bs;ve.httpOverHttps=$s;ve.httpsOverHttps=Gs;function Ls(e){var t=new z(e);return t.request=wt.request,t}function Bs(e){var t=new z(e);return t.request=wt.request,t.createSocket=an,t.defaultPort=443,t}function $s(e){var t=new z(e);return t.request=sn.request,t}function Gs(e){var t=new z(e);return t.request=sn.request,t.createSocket=an,t.defaultPort=443,t}function z(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||wt.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,i,s,a){for(var u=on(i,s,a),o=0,c=t.requests.length;o<c;++o){var l=t.requests[o];if(l.host===u.host&&l.port===u.port){t.requests.splice(o,1),l.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}Us.inherits(z,Ms.EventEmitter);z.prototype.addRequest=function(t,r,n,i){var s=this,a=Et({request:t},s.options,on(r,n,i));if(s.sockets.length>=this.maxSockets){s.requests.push(a);return}s.createSocket(a,function(u){u.on("free",o),u.on("close",c),u.on("agentRemove",c),t.onSocket(u);function o(){s.emit("free",u,a)}function c(l){s.removeSocket(u),u.removeListener("free",o),u.removeListener("close",c),u.removeListener("agentRemove",c)}})};z.prototype.createSocket=function(t,r){var n=this,i={};n.sockets.push(i);var s=Et({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),X("making CONNECT request");var a=n.request(s);a.useChunkedEncodingByDefault=!1,a.once("response",u),a.once("upgrade",o),a.once("connect",c),a.once("error",l),a.end();function u(h){h.upgrade=!0}function o(h,f,d){process.nextTick(function(){c(h,f,d)})}function c(h,f,d){if(a.removeAllListeners(),f.removeAllListeners(),h.statusCode!==200){X("tunneling socket could not be established, statusCode=%d",h.statusCode),f.destroy();var p=new Error("tunneling socket could not be established, statusCode="+h.statusCode);p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(i);return}if(d.length>0){X("got illegal response body from proxy"),f.destroy();var p=new Error("got illegal response body from proxy");p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(i);return}return X("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=f,r(f)}function l(h){a.removeAllListeners(),X(`tunneling socket could not be established, cause=%s
`,h.message,h.stack);var f=new Error("tunneling socket could not be established, cause="+h.message);f.code="ECONNRESET",t.request.emit("error",f),n.removeSocket(i)}};z.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(i){n.request.onSocket(i)})}};function an(e,t){var r=this;z.prototype.createSocket.call(r,e,function(n){var i=e.request.getHeader("host"),s=Et({},r.options,{socket:n,servername:i?i.replace(/:.*$/,""):e.host}),a=js.connect(0,s);r.sockets[r.sockets.indexOf(n)]=a,t(a)})}function on(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function Et(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var i=Object.keys(n),s=0,a=i.length;s<a;++s){var u=i[s];n[u]!==void 0&&(e[u]=n[u])}}return e}var X;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?X=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:X=function(){};ve.debug=X});var ln=w((Ku,cn)=>{cn.exports=un()});var hn=w(E=>{"use strict";var Fs=E&&E.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Vs=E&&E.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),He=E&&E.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Fs(t,e,r);return Vs(t,e),t},S=E&&E.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function u(l){try{c(n.next(l))}catch(h){a(h)}}function o(l){try{c(n.throw(l))}catch(h){a(h)}}function c(l){l.done?s(l.value):i(l.value).then(u,o)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(E,"__esModule",{value:!0});E.HttpClient=E.isHttps=E.HttpClientResponse=E.HttpClientError=E.getProxyUrl=E.MediaTypes=E.Headers=E.HttpCodes=void 0;var Ke=He(require("http")),bt=He(require("https")),fn=He(nn()),We=He(ln()),F;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(F=E.HttpCodes||(E.HttpCodes={}));var D;(function(e){e.Accept="accept",e.ContentType="content-type"})(D=E.Headers||(E.Headers={}));var Z;(function(e){e.ApplicationJson="application/json"})(Z=E.MediaTypes||(E.MediaTypes={}));function Ks(e){let t=fn.getProxyUrl(new URL(e));return t?t.href:""}E.getProxyUrl=Ks;var Ws=[F.MovedPermanently,F.ResourceMoved,F.SeeOther,F.TemporaryRedirect,F.PermanentRedirect],zs=[F.BadGateway,F.ServiceUnavailable,F.GatewayTimeout],Js=["OPTIONS","GET","DELETE","HEAD"],Ys=10,Hs=5,Je=class e extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,e.prototype)}};E.HttpClientError=Je;var Ye=class{constructor(t){this.message=t}readBody(){return S(this,void 0,void 0,function*(){return new Promise(t=>S(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};E.HttpClientResponse=Ye;function Qs(e){return new URL(e).protocol==="https:"}E.isHttps=Qs;var Ot=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return S(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return S(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return S(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return S(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return S(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return S(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return S(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,i){return S(this,void 0,void 0,function*(){return this.request(t,r,n,i)})}getJson(t,r={}){return S(this,void 0,void 0,function*(){r[D.Accept]=this._getExistingOrDefaultHeader(r,D.Accept,Z.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return S(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[D.Accept]=this._getExistingOrDefaultHeader(n,D.Accept,Z.ApplicationJson),n[D.ContentType]=this._getExistingOrDefaultHeader(n,D.ContentType,Z.ApplicationJson);let s=yield this.post(t,i,n);return this._processResponse(s,this.requestOptions)})}putJson(t,r,n={}){return S(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[D.Accept]=this._getExistingOrDefaultHeader(n,D.Accept,Z.ApplicationJson),n[D.ContentType]=this._getExistingOrDefaultHeader(n,D.ContentType,Z.ApplicationJson);let s=yield this.put(t,i,n);return this._processResponse(s,this.requestOptions)})}patchJson(t,r,n={}){return S(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[D.Accept]=this._getExistingOrDefaultHeader(n,D.Accept,Z.ApplicationJson),n[D.ContentType]=this._getExistingOrDefaultHeader(n,D.ContentType,Z.ApplicationJson);let s=yield this.patch(t,i,n);return this._processResponse(s,this.requestOptions)})}request(t,r,n,i){return S(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),a=this._prepareRequest(t,s,i),u=this._allowRetries&&Js.includes(t)?this._maxRetries+1:1,o=0,c;do{if(c=yield this.requestRaw(a,n),c&&c.message&&c.message.statusCode===F.Unauthorized){let h;for(let f of this.handlers)if(f.canHandleAuthentication(c)){h=f;break}return h?h.handleAuthentication(this,a,n):c}let l=this._maxRedirects;for(;c.message.statusCode&&Ws.includes(c.message.statusCode)&&this._allowRedirects&&l>0;){let h=c.message.headers.location;if(!h)break;let f=new URL(h);if(s.protocol==="https:"&&s.protocol!==f.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield c.readBody(),f.hostname!==s.hostname)for(let d in i)d.toLowerCase()==="authorization"&&delete i[d];a=this._prepareRequest(t,f,i),c=yield this.requestRaw(a,n),l--}if(!c.message.statusCode||!zs.includes(c.message.statusCode))return c;o+=1,o<u&&(yield c.readBody(),yield this._performExponentialBackoff(o))}while(o<u);return c})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return S(this,void 0,void 0,function*(){return new Promise((n,i)=>{function s(a,u){a?i(a):u?n(u):i(new Error("Unknown error"))}this.requestRawWithCallback(t,r,s)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let i=!1;function s(o,c){i||(i=!0,n(o,c))}let a=t.httpModule.request(t.options,o=>{let c=new Ye(o);s(void 0,c)}),u;a.on("socket",o=>{u=o}),a.setTimeout(this._socketTimeout||3*6e4,()=>{u&&u.end(),s(new Error(`Request timeout: ${t.options.path}`))}),a.on("error",function(o){s(o)}),r&&typeof r=="string"&&a.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){a.end()}),r.pipe(a)):a.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let i={};i.parsedUrl=r;let s=i.parsedUrl.protocol==="https:";i.httpModule=s?bt:Ke;let a=s?443:80;if(i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):a,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=t,i.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(i.options.headers["user-agent"]=this.userAgent),i.options.agent=this._getAgent(i.parsedUrl),this.handlers)for(let u of this.handlers)u.prepareRequest(i.options);return i}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},ze(this.requestOptions.headers),ze(t||{})):ze(t||{})}_getExistingOrDefaultHeader(t,r,n){let i;return this.requestOptions&&this.requestOptions.headers&&(i=ze(this.requestOptions.headers)[r]),t[r]||i||n}_getAgent(t){let r,n=fn.getProxyUrl(t),i=n&&n.hostname;if(this._keepAlive&&i&&(r=this._proxyAgent),this._keepAlive&&!i&&(r=this._agent),r)return r;let s=t.protocol==="https:",a=100;if(this.requestOptions&&(a=this.requestOptions.maxSockets||Ke.globalAgent.maxSockets),n&&n.hostname){let u={maxSockets:a,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},o,c=n.protocol==="https:";s?o=c?We.httpsOverHttps:We.httpsOverHttp:o=c?We.httpOverHttps:We.httpOverHttp,r=o(u),this._proxyAgent=r}if(this._keepAlive&&!r){let u={keepAlive:this._keepAlive,maxSockets:a};r=s?new bt.Agent(u):new Ke.Agent(u),this._agent=r}return r||(r=s?bt.globalAgent:Ke.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return S(this,void 0,void 0,function*(){t=Math.min(Ys,t);let r=Hs*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return S(this,void 0,void 0,function*(){return new Promise((n,i)=>S(this,void 0,void 0,function*(){let s=t.message.statusCode||0,a={statusCode:s,result:null,headers:{}};s===F.NotFound&&n(a);function u(l,h){if(typeof h=="string"){let f=new Date(h);if(!isNaN(f.valueOf()))return f}return h}let o,c;try{c=yield t.readBody(),c&&c.length>0&&(r&&r.deserializeDates?o=JSON.parse(c,u):o=JSON.parse(c),a.result=o),a.headers=t.message.headers}catch{}if(s>299){let l;o&&o.message?l=o.message:c&&c.length>0?l=c:l=`Failed request: (${s})`;let h=new Je(l,s);h.result=a.result,i(h)}else n(a)}))})}};E.HttpClient=Ot;var ze=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var dn=w(V=>{"use strict";var Tt=V&&V.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function u(l){try{c(n.next(l))}catch(h){a(h)}}function o(l){try{c(n.throw(l))}catch(h){a(h)}}function c(l){l.done?s(l.value):i(l.value).then(u,o)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(V,"__esModule",{value:!0});V.PersonalAccessTokenCredentialHandler=V.BearerCredentialHandler=V.BasicCredentialHandler=void 0;var St=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Tt(this,void 0,void 0,function*(){throw new Error("not implemented")})}};V.BasicCredentialHandler=St;var At=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Tt(this,void 0,void 0,function*(){throw new Error("not implemented")})}};V.BearerCredentialHandler=At;var Rt=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Tt(this,void 0,void 0,function*(){throw new Error("not implemented")})}};V.PersonalAccessTokenCredentialHandler=Rt});var vn=w(ge=>{"use strict";var pn=ge&&ge.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function u(l){try{c(n.next(l))}catch(h){a(h)}}function o(l){try{c(n.throw(l))}catch(h){a(h)}}function c(l){l.done?s(l.value):i(l.value).then(u,o)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(ge,"__esModule",{value:!0});ge.OidcClient=void 0;var Xs=hn(),Zs=dn(),mn=Qe(),kt=class e{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new Xs.HttpClient("actions/oidc-client",[new Zs.BearerCredentialHandler(e.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return pn(this,void 0,void 0,function*(){let s=(r=(yield e.createHttpClient().getJson(t).catch(a=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${a.statusCode}
 
        Error Message: ${a.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return pn(this,void 0,void 0,function*(){try{let r=e.getIDTokenUrl();if(t){let i=encodeURIComponent(t);r=`${r}&audience=${i}`}mn.debug(`ID token url is ${r}`);let n=yield e.getCall(r);return mn.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};ge.OidcClient=kt});var qt=w(C=>{"use strict";var xt=C&&C.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function u(l){try{c(n.next(l))}catch(h){a(h)}}function o(l){try{c(n.throw(l))}catch(h){a(h)}}function c(l){l.done?s(l.value):i(l.value).then(u,o)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(C,"__esModule",{value:!0});C.summary=C.markdownSummary=C.SUMMARY_DOCS_URL=C.SUMMARY_ENV_VAR=void 0;var ea=require("os"),Pt=require("fs"),{access:ta,appendFile:ra,writeFile:na}=Pt.promises;C.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";C.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Nt=class{constructor(){this._buffer=""}filePath(){return xt(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[C.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${C.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield ta(t,Pt.constants.R_OK|Pt.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let i=Object.entries(n).map(([s,a])=>` ${s}="${a}"`).join("");return r?`<${t}${i}>${r}</${t}>`:`<${t}${i}>`}write(t){return xt(this,void 0,void 0,function*(){let r=!!t?.overwrite,n=yield this.filePath();return yield(r?na:ra)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return xt(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(ea.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),i=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(i).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",i=t.map(a=>this.wrap("li",a)).join(""),s=this.wrap(n,i);return this.addRaw(s).addEOL()}addTable(t){let r=t.map(i=>{let s=i.map(a=>{if(typeof a=="string")return this.wrap("td",a);let{header:u,data:o,colspan:c,rowspan:l}=a,h=u?"th":"td",f=Object.assign(Object.assign({},c&&{colspan:c}),l&&{rowspan:l});return this.wrap(h,o,f)}).join("");return this.wrap("tr",s)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:i,height:s}=n||{},a=Object.assign(Object.assign({},i&&{width:i}),s&&{height:s}),u=this.wrap("img",null,Object.assign({src:t,alt:r},a));return this.addRaw(u).addEOL()}addHeading(t,r){let n=`h${r}`,i=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",s=this.wrap(i,t);return this.addRaw(s).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),i=this.wrap("blockquote",t,n);return this.addRaw(i).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},gn=new Nt;C.markdownSummary=gn;C.summary=gn});var yn=w(I=>{"use strict";var ia=I&&I.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),sa=I&&I.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),aa=I&&I.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&ia(t,e,r);return sa(t,e),t};Object.defineProperty(I,"__esModule",{value:!0});I.toPlatformPath=I.toWin32Path=I.toPosixPath=void 0;var oa=aa(require("path"));function ua(e){return e.replace(/[\\]/g,"/")}I.toPosixPath=ua;function ca(e){return e.replace(/[/]/g,"\\")}I.toWin32Path=ca;function la(e){return e.replace(/[/\\]/g,oa.sep)}I.toPlatformPath=la});var Qe=w(m=>{"use strict";var fa=m&&m.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ha=m&&m.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),_n=m&&m.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&fa(t,e,r);return ha(t,e),t},wn=m&&m.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function u(l){try{c(n.next(l))}catch(h){a(h)}}function o(l){try{c(n.throw(l))}catch(h){a(h)}}function c(l){l.done?s(l.value):i(l.value).then(u,o)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(m,"__esModule",{value:!0});m.getIDToken=m.getState=m.saveState=m.group=m.endGroup=m.startGroup=m.info=m.notice=m.warning=m.error=m.debug=m.isDebug=m.setFailed=m.setCommandEcho=m.setOutput=m.getBooleanInput=m.getMultilineInput=m.getInput=m.addPath=m.setSecret=m.exportVariable=m.ExitCode=void 0;var B=Tr(),oe=tn(),ye=Be(),En=_n(require("os")),da=_n(require("path")),pa=vn(),bn;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(bn=m.ExitCode||(m.ExitCode={}));function ma(e,t){let r=ye.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return oe.issueFileCommand("ENV",oe.prepareKeyValueMessage(e,t));B.issueCommand("set-env",{name:e},r)}m.exportVariable=ma;function va(e){B.issueCommand("add-mask",{},e)}m.setSecret=va;function ga(e){process.env.GITHUB_PATH||""?oe.issueFileCommand("PATH",e):B.issueCommand("add-path",{},e),process.env.PATH=`${e}${da.delimiter}${process.env.PATH}`}m.addPath=ga;function Dt(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}m.getInput=Dt;function ya(e,t){let r=Dt(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}m.getMultilineInput=ya;function _a(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],i=Dt(e,t);if(r.includes(i))return!0;if(n.includes(i))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}m.getBooleanInput=_a;function wa(e,t){if(process.env.GITHUB_OUTPUT||"")return oe.issueFileCommand("OUTPUT",oe.prepareKeyValueMessage(e,t));process.stdout.write(En.EOL),B.issueCommand("set-output",{name:e},ye.toCommandValue(t))}m.setOutput=wa;function Ea(e){B.issue("echo",e?"on":"off")}m.setCommandEcho=Ea;function ba(e){process.exitCode=bn.Failure,On(e)}m.setFailed=ba;function Oa(){return process.env.RUNNER_DEBUG==="1"}m.isDebug=Oa;function Sa(e){B.issueCommand("debug",{},e)}m.debug=Sa;function On(e,t={}){B.issueCommand("error",ye.toCommandProperties(t),e instanceof Error?e.toString():e)}m.error=On;function Aa(e,t={}){B.issueCommand("warning",ye.toCommandProperties(t),e instanceof Error?e.toString():e)}m.warning=Aa;function Ra(e,t={}){B.issueCommand("notice",ye.toCommandProperties(t),e instanceof Error?e.toString():e)}m.notice=Ra;function Ta(e){process.stdout.write(e+En.EOL)}m.info=Ta;function Sn(e){B.issue("group",e)}m.startGroup=Sn;function An(){B.issue("endgroup")}m.endGroup=An;function ka(e,t){return wn(this,void 0,void 0,function*(){Sn(e);let r;try{r=yield t()}finally{An()}return r})}m.group=ka;function xa(e,t){if(process.env.GITHUB_STATE||"")return oe.issueFileCommand("STATE",oe.prepareKeyValueMessage(e,t));B.issueCommand("save-state",{name:e},ye.toCommandValue(t))}m.saveState=xa;function Pa(e){return process.env[`STATE_${e}`]||""}m.getState=Pa;function Na(e){return wn(this,void 0,void 0,function*(){return yield pa.OidcClient.getIDToken(e)})}m.getIDToken=Na;var qa=qt();Object.defineProperty(m,"summary",{enumerable:!0,get:function(){return qa.summary}});var Da=qt();Object.defineProperty(m,"markdownSummary",{enumerable:!0,get:function(){return Da.markdownSummary}});var Ct=yn();Object.defineProperty(m,"toPosixPath",{enumerable:!0,get:function(){return Ct.toPosixPath}});Object.defineProperty(m,"toWin32Path",{enumerable:!0,get:function(){return Ct.toWin32Path}});Object.defineProperty(m,"toPlatformPath",{enumerable:!0,get:function(){return Ct.toPlatformPath}})});var xn=w(It=>{var ue=require("path"),re=process.platform==="win32",te=require("fs"),Ca=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function Ia(){var e;if(Ca){var t=new Error;e=r}else e=n;return e;function r(i){i&&(t.message=i.message,i=t,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var s="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function ja(e){return typeof e=="function"?e:Ia()}var Zu=ue.normalize;re?J=/(.*?)(?:[\/\\]+|$)/g:J=/(.*?)(?:[\/]+|$)/g;var J;re?Ne=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:Ne=/^[\/]*/;var Ne;It.realpathSync=function(t,r){if(t=ue.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];var n=t,i={},s={},a,u,o,c;l();function l(){var g=Ne.exec(t);a=g[0].length,u=g[0],o=g[0],c="",re&&!s[o]&&(te.lstatSync(o),s[o]=!0)}for(;a<t.length;){J.lastIndex=a;var h=J.exec(t);if(c=u,u+=h[0],o=c+h[1],a=J.lastIndex,!(s[o]||r&&r[o]===o)){var f;if(r&&Object.prototype.hasOwnProperty.call(r,o))f=r[o];else{var d=te.lstatSync(o);if(!d.isSymbolicLink()){s[o]=!0,r&&(r[o]=o);continue}var p=null;if(!re){var v=d.dev.toString(32)+":"+d.ino.toString(32);i.hasOwnProperty(v)&&(p=i[v])}p===null&&(te.statSync(o),p=te.readlinkSync(o)),f=ue.resolve(c,p),r&&(r[o]=f),re||(i[v]=p)}t=ue.resolve(f,t.slice(a)),l()}}return r&&(r[n]=t),t};It.realpath=function(t,r,n){if(typeof n!="function"&&(n=ja(r),r=null),t=ue.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return process.nextTick(n.bind(null,null,r[t]));var i=t,s={},a={},u,o,c,l;h();function h(){var g=Ne.exec(t);u=g[0].length,o=g[0],c=g[0],l="",re&&!a[c]?te.lstat(c,function(_){if(_)return n(_);a[c]=!0,f()}):process.nextTick(f)}function f(){if(u>=t.length)return r&&(r[i]=t),n(null,t);J.lastIndex=u;var g=J.exec(t);return l=o,o+=g[0],c=l+g[1],u=J.lastIndex,a[c]||r&&r[c]===c?process.nextTick(f):r&&Object.prototype.hasOwnProperty.call(r,c)?v(r[c]):te.lstat(c,d)}function d(g,_){if(g)return n(g);if(!_.isSymbolicLink())return a[c]=!0,r&&(r[c]=c),process.nextTick(f);if(!re){var O=_.dev.toString(32)+":"+_.ino.toString(32);if(s.hasOwnProperty(O))return p(null,s[O],c)}te.stat(c,function(N){if(N)return n(N);te.readlink(c,function(R,G){re||(s[O]=G),p(R,G)})})}function p(g,_,O){if(g)return n(g);var N=ue.resolve(l,_);r&&(r[O]=N),v(N)}function v(g){t=ue.resolve(g,t.slice(u)),h()}}});var Lt=w((tc,Dn)=>{Dn.exports=ne;ne.realpath=ne;ne.sync=Ut;ne.realpathSync=Ut;ne.monkeypatch=Ua;ne.unmonkeypatch=La;var _e=require("fs"),jt=_e.realpath,Mt=_e.realpathSync,Ma=process.version,Pn=/^v[0-5]\./.test(Ma),Nn=xn();function qn(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function ne(e,t,r){if(Pn)return jt(e,t,r);typeof t=="function"&&(r=t,t=null),jt(e,t,function(n,i){qn(n)?Nn.realpath(e,t,r):r(n,i)})}function Ut(e,t){if(Pn)return Mt(e,t);try{return Mt(e,t)}catch(r){if(qn(r))return Nn.realpathSync(e,t);throw r}}function Ua(){_e.realpath=ne,_e.realpathSync=Ut}function La(){_e.realpath=jt,_e.realpathSync=Mt}});var In=w((rc,Cn)=>{Cn.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=t(e[n],n);Ba(i)?r.push.apply(r,i):r.push(i)}return r};var Ba=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var Bn=w((nc,Ln)=>{"use strict";Ln.exports=Mn;function Mn(e,t,r){e instanceof RegExp&&(e=jn(e,r)),t instanceof RegExp&&(t=jn(t,r));var n=Un(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function jn(e,t){var r=t.match(e);return r?r[0]:null}Mn.range=Un;function Un(e,t,r){var n,i,s,a,u,o=r.indexOf(e),c=r.indexOf(t,o+1),l=o;if(o>=0&&c>0){if(e===t)return[o,c];for(n=[],s=r.length;l>=0&&!u;)l==o?(n.push(l),o=r.indexOf(e,l+1)):n.length==1?u=[n.pop(),c]:(i=n.pop(),i<s&&(s=i,a=c),c=r.indexOf(t,l+1)),l=o<c&&o>=0?o:c;n.length&&(u=[s,a])}return u}});var Jn=w((ic,zn)=>{var $a=In(),$n=Bn();zn.exports=Va;var Gn="\0SLASH"+Math.random()+"\0",Fn="\0OPEN"+Math.random()+"\0",$t="\0CLOSE"+Math.random()+"\0",Vn="\0COMMA"+Math.random()+"\0",Kn="\0PERIOD"+Math.random()+"\0";function Bt(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function Ga(e){return e.split("\\\\").join(Gn).split("\\{").join(Fn).split("\\}").join($t).split("\\,").join(Vn).split("\\.").join(Kn)}function Fa(e){return e.split(Gn).join("\\").split(Fn).join("{").split($t).join("}").split(Vn).join(",").split(Kn).join(".")}function Wn(e){if(!e)return[""];var t=[],r=$n("{","}",e);if(!r)return e.split(",");var n=r.pre,i=r.body,s=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var u=Wn(s);return s.length&&(a[a.length-1]+=u.shift(),a.push.apply(a,u)),t.push.apply(t,a),t}function Va(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),we(Ga(e),!0).map(Fa)):[]}function Ka(e){return"{"+e+"}"}function Wa(e){return/^-?0\d/.test(e)}function za(e,t){return e<=t}function Ja(e,t){return e>=t}function we(e,t){var r=[],n=$n("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),a=i||s,u=n.body.indexOf(",")>=0;if(!a&&!u)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+$t+n.post,we(e)):[e];var o;if(a)o=n.body.split(/\.\./);else if(o=Wn(n.body),o.length===1&&(o=we(o[0],!1).map(Ka),o.length===1)){var l=n.post.length?we(n.post,!1):[""];return l.map(function(ut){return n.pre+o[0]+ut})}var c=n.pre,l=n.post.length?we(n.post,!1):[""],h;if(a){var f=Bt(o[0]),d=Bt(o[1]),p=Math.max(o[0].length,o[1].length),v=o.length==3?Math.abs(Bt(o[2])):1,g=za,_=d<f;_&&(v*=-1,g=Ja);var O=o.some(Wa);h=[];for(var N=f;g(N,d);N+=v){var R;if(s)R=String.fromCharCode(N),R==="\\"&&(R="");else if(R=String(N),O){var G=p-R.length;if(G>0){var Me=new Array(G+1).join("0");N<0?R="-"+Me+R.slice(1):R=Me+R}}h.push(R)}}else h=$a(o,function(Ue){return we(Ue,!1)});for(var de=0;de<h.length;de++)for(var se=0;se<l.length;se++){var W=c+h[de]+l[se];(!t||a||W)&&r.push(W)}return r}});var Ze=w((sc,ei)=>{ei.exports=$;$.Minimatch=T;var qe={sep:"/"};try{qe=require("path")}catch{}var Vt=$.GLOBSTAR=T.GLOBSTAR={},Ya=Jn(),Yn={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Gt="[^/]",Ft=Gt+"*?",Ha="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Qa="(?:(?!(?:\\/|^)\\.).)*?",Hn=Xa("().*{}+?[]^$\\!");function Xa(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var Xn=/\/+/;$.filter=Za;function Za(e,t){return t=t||{},function(r,n,i){return $(r,e,t)}}function Qn(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach(function(n){r[n]=t[n]}),Object.keys(e).forEach(function(n){r[n]=e[n]}),r}$.defaults=function(e){if(!e||!Object.keys(e).length)return $;var t=$,r=function(i,s,a){return t.minimatch(i,s,Qn(e,a))};return r.Minimatch=function(i,s){return new t.Minimatch(i,Qn(e,s))},r};T.defaults=function(e){return!e||!Object.keys(e).length?T:$.defaults(e).Minimatch};function $(e,t,r){if(typeof t!="string")throw new TypeError("glob pattern string required");return r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:t.trim()===""?e==="":new T(t,r).match(e)}function T(e,t){if(!(this instanceof T))return new T(e,t);if(typeof e!="string")throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),qe.sep!=="/"&&(e=e.split(qe.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}T.prototype.debug=function(){};T.prototype.make=eo;function eo(){if(!this._made){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(Xn)}),this.debug(this.pattern,r),r=r.map(function(n,i,s){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}}T.prototype.parseNegate=to;function to(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,s=e.length;i<s&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}$.braceExpand=function(e,t){return Zn(e,t)};T.prototype.braceExpand=Zn;function Zn(e,t){if(t||(this instanceof T?t=this.options:t={}),e=typeof e>"u"?this.pattern:e,typeof e>"u")throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:Ya(e)}T.prototype.parse=ro;var Xe={};function ro(e,t){if(e.length>1024*64)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&e==="**")return Vt;if(e==="")return"";var n="",i=!!r.nocase,s=!1,a=[],u=[],o,c=!1,l=-1,h=-1,f=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",d=this;function p(){if(o){switch(o){case"*":n+=Ft,i=!0;break;case"?":n+=Gt,i=!0;break;default:n+="\\"+o;break}d.debug("clearStateChar %j %j",o,n),o=!1}}for(var v=0,g=e.length,_;v<g&&(_=e.charAt(v));v++){if(this.debug("%s	%s %s %j",e,v,n,_),s&&Hn[_]){n+="\\"+_,s=!1;continue}switch(_){case"/":return!1;case"\\":p(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,v,n,_),c){this.debug("  in class"),_==="!"&&v===h+1&&(_="^"),n+=_;continue}d.debug("call clearStateChar %j",o),p(),o=_,r.noext&&p();continue;case"(":if(c){n+="(";continue}if(!o){n+="\\(";continue}a.push({type:o,start:v-1,reStart:n.length,open:Yn[o].open,close:Yn[o].close}),n+=o==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",o,n),o=!1;continue;case")":if(c||!a.length){n+="\\)";continue}p(),i=!0;var O=a.pop();n+=O.close,O.type==="!"&&u.push(O),O.reEnd=n.length;continue;case"|":if(c||!a.length||s){n+="\\|",s=!1;continue}p(),n+="|";continue;case"[":if(p(),c){n+="\\"+_;continue}c=!0,h=v,l=n.length,n+=_;continue;case"]":if(v===h+1||!c){n+="\\"+_,s=!1;continue}if(c){var N=e.substring(h+1,v);try{RegExp("["+N+"]")}catch{var R=this.parse(N,Xe);n=n.substr(0,l)+"\\["+R[0]+"\\]",i=i||R[1],c=!1;continue}}i=!0,c=!1,n+=_;continue;default:p(),s?s=!1:Hn[_]&&!(_==="^"&&c)&&(n+="\\"),n+=_}}for(c&&(N=e.substr(h+1),R=this.parse(N,Xe),n=n.substr(0,l)+"\\["+R[0],i=i||R[1]),O=a.pop();O;O=a.pop()){var G=n.slice(O.reStart+O.open.length);this.debug("setting tail",n,O),G=G.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Er,br,ft){return ft||(ft="\\"),br+br+ft+"|"}),this.debug(`tail=%j
   %s`,G,G,O,n);var Me=O.type==="*"?Ft:O.type==="?"?Gt:"\\"+O.type;i=!0,n=n.slice(0,O.reStart)+Me+"\\("+G}p(),s&&(n+="\\\\");var de=!1;switch(n.charAt(0)){case".":case"[":case"(":de=!0}for(var se=u.length-1;se>-1;se--){var W=u[se],Ue=n.slice(0,W.reStart),ut=n.slice(W.reStart,W.reEnd-8),_r=n.slice(W.reEnd-8,W.reEnd),Te=n.slice(W.reEnd);_r+=Te;var Xi=Ue.split("(").length-1,ct=Te;for(v=0;v<Xi;v++)ct=ct.replace(/\)[+*?]?/,"");Te=ct;var wr="";Te===""&&t!==Xe&&(wr="$");var Zi=Ue+ut+Te+wr+_r;n=Zi}if(n!==""&&i&&(n="(?=.)"+n),de&&(n=f+n),t===Xe)return[n,i];if(!i)return so(e);var es=r.nocase?"i":"";try{var lt=new RegExp("^"+n+"$",es)}catch{return new RegExp("$.")}return lt._glob=e,lt._src=n,lt}$.makeRe=function(e,t){return new T(e,t||{}).makeRe()};T.prototype.makeRe=no;function no(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?Ft:t.dot?Ha:Qa,n=t.nocase?"i":"",i=e.map(function(s){return s.map(function(a){return a===Vt?r:typeof a=="string"?ao(a):a._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}$.match=function(e,t,r){r=r||{};var n=new T(t,r);return e=e.filter(function(i){return n.match(i)}),n.options.nonull&&!e.length&&e.push(t),e};T.prototype.match=io;function io(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;var r=this.options;qe.sep!=="/"&&(e=e.split(qe.sep).join("/")),e=e.split(Xn),this.debug(this.pattern,"split",e);var n=this.set;this.debug(this.pattern,"set",n);var i,s;for(s=e.length-1;s>=0&&(i=e[s],!i);s--);for(s=0;s<n.length;s++){var a=n[s],u=e;r.matchBase&&a.length===1&&(u=[i]);var o=this.matchOne(u,a,t);if(o)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}T.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,a=e.length,u=t.length;i<a&&s<u;i++,s++){this.debug("matchOne loop");var o=t[s],c=e[i];if(this.debug(t,o,c),o===!1)return!1;if(o===Vt){this.debug("GLOBSTAR",[t,o,c]);var l=i,h=s+1;if(h===u){for(this.debug("** at the end");i<a;i++)if(e[i]==="."||e[i]===".."||!n.dot&&e[i].charAt(0)===".")return!1;return!0}for(;l<a;){var f=e[l];if(this.debug(`
globstar while`,e,l,t,h,f),this.matchOne(e.slice(l),t.slice(h),r))return this.debug("globstar found match!",l,a,f),!0;if(f==="."||f===".."||!n.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,l,t,h);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,l,t,h),l===a))}var d;if(typeof o=="string"?(n.nocase?d=c.toLowerCase()===o.toLowerCase():d=c===o,this.debug("string match",o,c,d)):(d=c.match(o),this.debug("pattern match",o,c,d)),!d)return!1}if(i===a&&s===u)return!0;if(i===a)return r;if(s===u){var p=i===a-1&&e[i]==="";return p}throw new Error("wtf?")};function so(e){return e.replace(/\\(.)/g,"$1")}function ao(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var ti=w((ac,Kt)=>{typeof Object.create=="function"?Kt.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Kt.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}});var ri=w((oc,zt)=>{try{if(Wt=require("util"),typeof Wt.inherits!="function")throw"";zt.exports=Wt.inherits}catch{zt.exports=ti()}var Wt});var tt=w((uc,et)=>{"use strict";function ni(e){return e.charAt(0)==="/"}function ii(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,r=t.exec(e),n=r[1]||"",i=!!(n&&n.charAt(1)!==":");return!!(r[2]||i)}et.exports=process.platform==="win32"?ii:ni;et.exports.posix=ni;et.exports.win32=ii});var Yt=w(ie=>{ie.setopts=ho;ie.ownProp=si;ie.makeAbs=De;ie.finish=po;ie.mark=mo;ie.isIgnored=oi;ie.childrenIgnored=vo;function si(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var oo=require("fs"),Ee=require("path"),uo=Ze(),ai=tt(),Jt=uo.Minimatch;function co(e,t){return e.localeCompare(t,"en")}function lo(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(fo))}function fo(e){var t=null;if(e.slice(-3)==="/**"){var r=e.replace(/(\/\*\*)+$/,"");t=new Jt(r,{dot:!0})}return{matcher:new Jt(e,{dot:!0}),gmatcher:t}}function ho(e,t,r){if(r||(r={}),r.matchBase&&t.indexOf("/")===-1){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=r.strict!==!1,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.fs=r.fs||oo,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),lo(e,r),e.changedCwd=!1;var n=process.cwd();si(r,"cwd")?(e.cwd=Ee.resolve(r.cwd),e.changedCwd=e.cwd!==n):e.cwd=n,e.root=r.root||Ee.resolve(e.cwd,"/"),e.root=Ee.resolve(e.root),process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=ai(e.cwd)?e.cwd:De(e,e.cwd),process.platform==="win32"&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new Jt(t,r),e.options=e.minimatch.options}function po(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var s=e.matches[n];if(!s||Object.keys(s).length===0){if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}else{var u=Object.keys(s);t?r.push.apply(r,u):u.forEach(function(o){r[o]=!0})}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(co)),e.mark){for(var n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter(function(o){var c=!/\/$/.test(o),l=e.cache[o]||e.cache[De(e,o)];return c&&l&&(c=l!=="DIR"&&!Array.isArray(l)),c}))}e.ignore.length&&(r=r.filter(function(o){return!oi(e,o)})),e.found=r}function mo(e,t){var r=De(e,t),n=e.cache[r],i=t;if(n){var s=n==="DIR"||Array.isArray(n),a=t.slice(-1)==="/";if(s&&!a?i+="/":!s&&a&&(i=i.slice(0,-1)),i!==t){var u=De(e,i);e.statCache[u]=e.statCache[r],e.cache[u]=e.cache[r]}}return i}function De(e,t){var r=t;return t.charAt(0)==="/"?r=Ee.join(e.root,t):ai(t)||t===""?r=t:e.changedCwd?r=Ee.resolve(e.cwd,t):r=Ee.resolve(t),process.platform==="win32"&&(r=r.replace(/\\/g,"/")),r}function oi(e,t){return e.ignore.length?e.ignore.some(function(r){return r.matcher.match(t)||!!(r.gmatcher&&r.gmatcher.match(t))}):!1}function vo(e,t){return e.ignore.length?e.ignore.some(function(r){return!!(r.gmatcher&&r.gmatcher.match(t))}):!1}});var hi=w((dc,fi)=>{fi.exports=li;li.GlobSync=A;var go=Lt(),ui=Ze(),lc=ui.Minimatch,fc=Xt().Glob,hc=require("util"),Ht=require("path"),ci=require("assert"),rt=tt(),ce=Yt(),yo=ce.setopts,Qt=ce.ownProp,_o=ce.childrenIgnored,wo=ce.isIgnored;function li(e,t){if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new A(e,t).found}function A(e,t){if(!e)throw new Error("must provide pattern");if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof A))return new A(e,t);if(yo(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}A.prototype._finish=function(){if(ci(this instanceof A),this.realpath){var e=this;this.matches.forEach(function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i);var s=go.realpathSync(i,e.realpathCache);n[s]=!0}catch(a){if(a.syscall==="stat")n[e._makeAbs(i)]=!0;else throw a}})}ce.finish(this)};A.prototype._process=function(e,t,r){ci(this instanceof A);for(var n=0;typeof e[n]=="string";)n++;var i;switch(n){case e.length:this._processSimple(e.join("/"),t);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var s=e.slice(n),a;i===null?a=".":((rt(i)||rt(e.join("/")))&&(!i||!rt(i))&&(i="/"+i),a=i);var u=this._makeAbs(a);if(!_o(this,a)){var o=s[0]===ui.GLOBSTAR;o?this._processGlobStar(i,a,u,s,t,r):this._processReaddir(i,a,u,s,t,r)}};A.prototype._processReaddir=function(e,t,r,n,i,s){var a=this._readdir(r,s);if(a){for(var u=n[0],o=!!this.minimatch.negate,c=u._glob,l=this.dot||c.charAt(0)===".",h=[],f=0;f<a.length;f++){var d=a[f];if(d.charAt(0)!=="."||l){var p;o&&!e?p=!d.match(u):p=d.match(u),p&&h.push(d)}}var v=h.length;if(v!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var f=0;f<v;f++){var d=h[f];e&&(e.slice(-1)!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=Ht.join(this.root,d)),this._emitMatch(i,d)}return}n.shift();for(var f=0;f<v;f++){var d=h[f],g;e?g=[e,d]:g=[d],this._process(g.concat(n),i,s)}}}};A.prototype._emitMatch=function(e,t){if(!wo(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}};A.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r,n;try{r=this.fs.lstatSync(e)}catch(s){if(s.code==="ENOENT")return null}var i=r&&r.isSymbolicLink();return this.symlinks[e]=i,!i&&r&&!r.isDirectory()?this.cache[e]="FILE":t=this._readdir(e,!1),t};A.prototype._readdir=function(e,t){var r;if(t&&!Qt(this.symlinks,e))return this._readdirInGlobStar(e);if(Qt(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};A.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t};A.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t);break}};A.prototype._processGlobStar=function(e,t,r,n,i,s){var a=this._readdir(r,s);if(a){var u=n.slice(1),o=e?[e]:[],c=o.concat(u);this._process(c,i,!1);var l=a.length,h=this.symlinks[r];if(!(h&&s))for(var f=0;f<l;f++){var d=a[f];if(!(d.charAt(0)==="."&&!this.dot)){var p=o.concat(a[f],u);this._process(p,i,!0);var v=o.concat(a[f],n);this._process(v,i,!0)}}}};A.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),!!r){if(e&&rt(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Ht.join(this.root,e):(e=Ht.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}};A.prototype._stat=function(e){var t=this._makeAbs(e),r=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&Qt(this.cache,t)){var a=this.cache[t];if(Array.isArray(a)&&(a="DIR"),!r||a==="DIR")return a;if(r&&a==="FILE")return!1}var n,i=this.statCache[t];if(!i){var s;try{s=this.fs.lstatSync(t)}catch(u){if(u&&(u.code==="ENOENT"||u.code==="ENOTDIR"))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{i=this.fs.statSync(t)}catch{i=s}else i=s}this.statCache[t]=i;var a=!0;return i&&(a=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||a,r&&a==="FILE"?!1:a};A.prototype._mark=function(e){return ce.mark(this,e)};A.prototype._makeAbs=function(e){return ce.makeAbs(this,e)}});var Zt=w((pc,pi)=>{pi.exports=di;function di(e,t){if(e&&t)return di(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var s=e.apply(this,n),a=n[n.length-1];return typeof s=="function"&&s!==a&&Object.keys(a).forEach(function(u){s[u]=a[u]}),s}}});var tr=w((mc,er)=>{var mi=Zt();er.exports=mi(nt);er.exports.strict=mi(vi);nt.proto=nt(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return nt(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return vi(this)},configurable:!0})});function nt(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function vi(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}});var yi=w((vc,gi)=>{var Eo=Zt(),Ce=Object.create(null),bo=tr();gi.exports=Eo(Oo);function Oo(e,t){return Ce[e]?(Ce[e].push(t),null):(Ce[e]=[t],So(e))}function So(e){return bo(function t(){var r=Ce[e],n=r.length,i=Ao(arguments);try{for(var s=0;s<n;s++)r[s].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick(function(){t.apply(null,i)})):delete Ce[e]}})}function Ao(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}});var Xt=w((_c,wi)=>{wi.exports=le;var Ro=Lt(),_i=Ze(),gc=_i.Minimatch,To=ri(),ko=require("events").EventEmitter,rr=require("path"),nr=require("assert"),Ie=tt(),sr=hi(),fe=Yt(),xo=fe.setopts,ir=fe.ownProp,ar=yi(),yc=require("util"),Po=fe.childrenIgnored,No=fe.isIgnored,qo=tr();function le(e,t,r){if(typeof t=="function"&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return sr(e,t)}return new y(e,t,r)}le.sync=sr;var Do=le.GlobSync=sr.GlobSync;le.glob=le;function Co(e,t){if(t===null||typeof t!="object")return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}le.hasMagic=function(e,t){var r=Co({},t);r.noprocess=!0;var n=new y(e,r),i=n.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var s=0;s<i[0].length;s++)if(typeof i[0][s]!="string")return!0;return!1};le.Glob=y;To(y,ko);function y(e,t,r){if(typeof t=="function"&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new Do(e,t)}if(!(this instanceof y))return new y(e,t,r);xo(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof r=="function"&&(r=qo(r),this.on("error",r),this.on("end",function(o){r(null,o)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return u();for(var s=!0,a=0;a<n;a++)this._process(this.minimatch.set[a],a,!1,u);s=!1;function u(){--i._processing,i._processing<=0&&(s?process.nextTick(function(){i._finish()}):i._finish())}}y.prototype._finish=function(){if(nr(this instanceof y),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();fe.finish(this),this.emit("end",this.found)}};y.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n);function n(){--e===0&&t._finish()}};y.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,s=n.length;if(s===0)return t();var a=this.matches[e]=Object.create(null);n.forEach(function(u,o){u=i._makeAbs(u),Ro.realpath(u,i.realpathCache,function(c,l){c?c.syscall==="stat"?a[u]=!0:i.emit("error",c):a[l]=!0,--s===0&&(i.matches[e]=a,t())})})};y.prototype._mark=function(e){return fe.mark(this,e)};y.prototype._makeAbs=function(e){return fe.makeAbs(this,e)};y.prototype.abort=function(){this.aborted=!0,this.emit("abort")};y.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};y.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};y.prototype._process=function(e,t,r,n){if(nr(this instanceof y),nr(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,t,r,n]);return}for(var i=0;typeof e[i]=="string";)i++;var s;switch(i){case e.length:this._processSimple(e.join("/"),t,n);return;case 0:s=null;break;default:s=e.slice(0,i).join("/");break}var a=e.slice(i),u;s===null?u=".":((Ie(s)||Ie(e.join("/")))&&(!s||!Ie(s))&&(s="/"+s),u=s);var o=this._makeAbs(u);if(Po(this,u))return n();var c=a[0]===_i.GLOBSTAR;c?this._processGlobStar(s,u,o,a,t,r,n):this._processReaddir(s,u,o,a,t,r,n)}};y.prototype._processReaddir=function(e,t,r,n,i,s,a){var u=this;this._readdir(r,s,function(o,c){return u._processReaddir2(e,t,r,n,i,s,c,a)})};y.prototype._processReaddir2=function(e,t,r,n,i,s,a,u){if(!a)return u();for(var o=n[0],c=!!this.minimatch.negate,l=o._glob,h=this.dot||l.charAt(0)===".",f=[],d=0;d<a.length;d++){var p=a[d];if(p.charAt(0)!=="."||h){var v;c&&!e?v=!p.match(o):v=p.match(o),v&&f.push(p)}}var g=f.length;if(g===0)return u();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var d=0;d<g;d++){var p=f[d];e&&(e!=="/"?p=e+"/"+p:p=e+p),p.charAt(0)==="/"&&!this.nomount&&(p=rr.join(this.root,p)),this._emitMatch(i,p)}return u()}n.shift();for(var d=0;d<g;d++){var p=f[d],_;e&&(e!=="/"?p=e+"/"+p:p=e+p),this._process([p].concat(n),i,s,u)}u()};y.prototype._emitMatch=function(e,t){if(!this.aborted&&!No(this,t)){if(this.paused){this._emitQueue.push([e,t]);return}var r=Ie(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}};y.prototype._readdirInGlobStar=function(e,t){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,t);var r="lstat\0"+e,n=this,i=ar(r,s);i&&n.fs.lstat(e,i);function s(a,u){if(a&&a.code==="ENOENT")return t();var o=u&&u.isSymbolicLink();n.symlinks[e]=o,!o&&u&&!u.isDirectory()?(n.cache[e]="FILE",t()):n._readdir(e,!1,t)}};y.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=ar("readdir\0"+e+"\0"+t,r),!!r)){if(t&&!ir(this.symlinks,e))return this._readdirInGlobStar(e,r);if(ir(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return r();if(Array.isArray(n))return r(null,n)}var i=this;i.fs.readdir(e,Io(this,e,r))}};function Io(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}y.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}};y.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t);break}return r()}};y.prototype._processGlobStar=function(e,t,r,n,i,s,a){var u=this;this._readdir(r,s,function(o,c){u._processGlobStar2(e,t,r,n,i,s,c,a)})};y.prototype._processGlobStar2=function(e,t,r,n,i,s,a,u){if(!a)return u();var o=n.slice(1),c=e?[e]:[],l=c.concat(o);this._process(l,i,!1,u);var h=this.symlinks[r],f=a.length;if(h&&s)return u();for(var d=0;d<f;d++){var p=a[d];if(!(p.charAt(0)==="."&&!this.dot)){var v=c.concat(a[d],o);this._process(v,i,!0,u);var g=c.concat(a[d],n);this._process(g,i,!0,u)}}u()};y.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,function(i,s){n._processSimple2(e,t,i,s,r)})};y.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&Ie(e)&&!this.nomount){var s=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=rr.join(this.root,e):(e=rr.resolve(this.root,e),s&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()};y.prototype._stat=function(e,t){var r=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return t();if(!this.stat&&ir(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return t(null,i);if(n&&i==="FILE")return t()}var s,a=this.statCache[r];if(a!==void 0){if(a===!1)return t(null,a);var u=a.isDirectory()?"DIR":"FILE";return n&&u==="FILE"?t():t(null,u,a)}var o=this,c=ar("stat\0"+r,l);c&&o.fs.lstat(r,c);function l(h,f){if(f&&f.isSymbolicLink())return o.fs.stat(r,function(d,p){d?o._stat2(e,r,null,f,t):o._stat2(e,r,d,p,t)});o._stat2(e,r,h,f,t)}};y.prototype._stat2=function(e,t,r,n,i){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[t]=!1,i();var s=e.slice(-1)==="/";if(this.statCache[t]=n,t.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var a=!0;return n&&(a=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||a,s&&a==="FILE"?i():i(null,a,n)}});var ki=w((wc,Ti)=>{var b=require("assert"),Si=require("path"),Ei=require("fs"),be;try{be=Xt()}catch{}var jo={nosort:!0,silent:!0},or=0,je=process.platform==="win32",Ai=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Ei[r],r=r+"Sync",e[r]=e[r]||Ei[r]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,e.glob===!1&&(e.disableGlob=!0),e.disableGlob!==!0&&be===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||jo},cr=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),b(e,"rimraf: missing path"),b.equal(typeof e,"string","rimraf: path should be a string"),b.equal(typeof r,"function","rimraf: callback function required"),b(t,"rimraf: invalid options argument provided"),b.equal(typeof t,"object","rimraf: options should be object"),Ai(t);let n=0,i=null,s=0,a=o=>{i=i||o,--s===0&&r(i)},u=(o,c)=>{if(o)return r(o);if(s=c.length,s===0)return r();c.forEach(l=>{let h=f=>{if(f){if((f.code==="EBUSY"||f.code==="ENOTEMPTY"||f.code==="EPERM")&&n<t.maxBusyTries)return n++,setTimeout(()=>ur(l,t,h),n*100);if(f.code==="EMFILE"&&or<t.emfileWait)return setTimeout(()=>ur(l,t,h),or++);f.code==="ENOENT"&&(f=null)}or=0,a(f)};ur(l,t,h)})};if(t.disableGlob||!be.hasMagic(e))return u(null,[e]);t.lstat(e,(o,c)=>{if(!o)return u(null,[e]);be(e,t.glob,u)})},ur=(e,t,r)=>{b(e),b(t),b(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&je&&bi(e,t,n,r),i&&i.isDirectory())return it(e,t,n,r);t.unlink(e,s=>{if(s){if(s.code==="ENOENT")return r(null);if(s.code==="EPERM")return je?bi(e,t,s,r):it(e,t,s,r);if(s.code==="EISDIR")return it(e,t,s,r)}return r(s)})})},bi=(e,t,r,n)=>{b(e),b(t),b(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(s,a)=>{s?n(s.code==="ENOENT"?null:r):a.isDirectory()?it(e,t,r,n):t.unlink(e,n)})})},Oi=(e,t,r)=>{b(e),b(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}let n;try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?st(e,t,r):t.unlinkSync(e)},it=(e,t,r,n)=>{b(e),b(t),b(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Mo(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})},Mo=(e,t,r)=>{b(e),b(t),b(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let s=i.length;if(s===0)return t.rmdir(e,r);let a;i.forEach(u=>{cr(Si.join(e,u),t,o=>{if(!a){if(o)return r(a=o);--s===0&&t.rmdir(e,r)}})})})},Ri=(e,t)=>{t=t||{},Ai(t),b(e,"rimraf: missing path"),b.equal(typeof e,"string","rimraf: path should be a string"),b(t,"rimraf: missing options"),b.equal(typeof t,"object","rimraf: options should be object");let r;if(t.disableGlob||!be.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch{r=be.sync(e,t.glob)}if(r.length)for(let n=0;n<r.length;n++){let i=r[n],s;try{s=t.lstatSync(i)}catch(a){if(a.code==="ENOENT")return;a.code==="EPERM"&&je&&Oi(i,t,a)}try{s&&s.isDirectory()?st(i,t,null):t.unlinkSync(i)}catch(a){if(a.code==="ENOENT")return;if(a.code==="EPERM")return je?Oi(i,t,a):st(i,t,a);if(a.code!=="EISDIR")throw a;st(i,t,a)}}},st=(e,t,r)=>{b(e),b(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR")throw r;(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")&&Uo(e,t)}},Uo=(e,t)=>{b(e),b(t),t.readdirSync(e).forEach(i=>Ri(Si.join(e,i),t));let r=je?100:1,n=0;do{let i=!0;try{let s=t.rmdirSync(e,t);return i=!1,s}finally{if(++n<r&&i)continue}}while(!0)};Ti.exports=cr;cr.sync=Ri});var Wi=w((Ec,Y)=>{var k=require("fs"),pr=require("os"),M=require("path"),xi=require("crypto"),K={fs:k.constants,os:pr.constants},qi=ki(),Pi="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Di=/XXXXXX/,Lo=3,Ci=(K.O_CREAT||K.fs.O_CREAT)|(K.O_EXCL||K.fs.O_EXCL)|(K.O_RDWR||K.fs.O_RDWR),Bo=pr.platform()==="win32",$o=K.EBADF||K.os.errno.EBADF,Go=K.ENOENT||K.os.errno.ENOENT,Ii=448,ji=384,Fo="exit",Oe=[],Mi=k.rmdirSync.bind(k),Ui=qi.sync,Li=!1;function mr(e,t){let r=Se(e,t),n=r[0],i=r[1];try{Fi(n)}catch(a){return i(a)}let s=n.tries;(function a(){try{let u=Gi(n);k.stat(u,function(o){if(!o)return s-- >0?a():i(new Error("Could not get a unique tmp filename, max tries reached "+u));i(null,u)})}catch(u){i(u)}})()}function vr(e){let t=Se(e),r=t[0];Fi(r);let n=r.tries;do{let i=Gi(r);try{k.statSync(i)}catch{return i}}while(n-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function Vo(e,t){let r=Se(e,t),n=r[0],i=r[1];mr(n,function(a,u){if(a)return i(a);k.open(u,Ci,n.mode||ji,function(c,l){if(c)return i(c);if(n.discardDescriptor)return k.close(l,function(f){return i(f,u,void 0,fr(u,-1,n,!1))});{let h=n.discardDescriptor||n.detachDescriptor;i(null,u,l,fr(u,h?-1:l,n,!1))}})})}function Ko(e){let t=Se(e),r=t[0],n=r.discardDescriptor||r.detachDescriptor,i=vr(r);var s=k.openSync(i,Ci,r.mode||ji);return r.discardDescriptor&&(k.closeSync(s),s=void 0),{name:i,fd:s,removeCallback:fr(i,n?-1:s,r,!0)}}function Wo(e,t){let r=Se(e,t),n=r[0],i=r[1];mr(n,function(a,u){if(a)return i(a);k.mkdir(u,n.mode||Ii,function(c){if(c)return i(c);i(null,u,Bi(u,n,!1))})})}function zo(e){let t=Se(e),r=t[0],n=vr(r);return k.mkdirSync(n,r.mode||Ii),{name:n,removeCallback:Bi(n,r,!0)}}function Jo(e,t){let r=function(n){if(n&&!dr(n))return t(n);t()};0<=e[0]?k.close(e[0],function(){k.unlink(e[1],r)}):k.unlink(e[1],r)}function Yo(e){let t=null;try{0<=e[0]&&k.closeSync(e[0])}catch(r){if(!Qo(r)&&!dr(r))throw r}finally{try{k.unlinkSync(e[1])}catch(r){dr(r)||(t=r)}}if(t!==null)throw t}function fr(e,t,r,n){let i=at(Yo,[t,e],n),s=at(Jo,[t,e],n,i);return r.keep||Oe.unshift(i),n?i:s}function Bi(e,t,r){let n=t.unsafeCleanup?qi:k.rmdir.bind(k),i=t.unsafeCleanup?Ui:Mi,s=at(i,e,r),a=at(n,e,r,s);return t.keep||Oe.unshift(s),r?s:a}function at(e,t,r,n){let i=!1;return function s(a){if(!i){let u=n||s,o=Oe.indexOf(u);return o>=0&&Oe.splice(o,1),i=!0,r||e===Mi||e===Ui?e(t):e(t,a||function(){})}}}function Ho(){if(Li)for(;Oe.length;)try{Oe[0]()}catch{}}function Ni(e){let t=[],r=null;try{r=xi.randomBytes(e)}catch{r=xi.pseudoRandomBytes(e)}for(var n=0;n<e;n++)t.push(Pi[r[n]%Pi.length]);return t.join("")}function $i(e){return e===null||j(e)||!e.trim()}function j(e){return typeof e>"u"}function Se(e,t){if(typeof e=="function")return[{},e];if(j(e))return[{},t];let r={};for(let n of Object.getOwnPropertyNames(e))r[n]=e[n];return[r,t]}function Gi(e){let t=e.tmpdir;if(!j(e.name))return M.join(t,e.dir,e.name);if(!j(e.template))return M.join(t,e.dir,e.template).replace(Di,Ni(6));let r=[e.prefix?e.prefix:"tmp","-",process.pid,"-",Ni(12),e.postfix?"-"+e.postfix:""].join("");return M.join(t,e.dir,r)}function Fi(e){e.tmpdir=Ki(e);let t=e.tmpdir;if(j(e.name)||lr(e.name,"name",t),j(e.dir)||lr(e.dir,"dir",t),!j(e.template)&&(lr(e.template,"template",t),!e.template.match(Di)))throw new Error(`Invalid template, found "${e.template}".`);if(!j(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=j(e.name)?e.tries||Lo:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.dir=j(e.dir)?"":M.relative(t,hr(e.dir,t)),e.template=j(e.template)?void 0:M.relative(t,hr(e.template,t)),e.template=$i(e.template)?void 0:M.relative(e.dir,e.template),e.name=j(e.name)?void 0:gr(e.name),e.prefix=j(e.prefix)?"":e.prefix,e.postfix=j(e.postfix)?"":e.postfix}function hr(e,t){let r=gr(e);return r.startsWith(t)?M.resolve(r):M.resolve(M.join(t,r))}function gr(e){return $i(e)?e:e.replace(/["']/g,"")}function lr(e,t,r){if(t==="name"){if(M.isAbsolute(e))throw new Error(`${t} option must not contain an absolute path, found "${e}".`);let n=M.basename(e);if(n===".."||n==="."||n!==e)throw new Error(`${t} option must not contain a path, found "${e}".`)}else{if(M.isAbsolute(e)&&!e.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${e}".`);let n=hr(e,r);if(!n.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${n}".`)}}function Qo(e){return Vi(e,-$o,"EBADF")}function dr(e){return Vi(e,-Go,"ENOENT")}function Vi(e,t,r){return Bo?e.code===r:e.code===r&&e.errno===t}function Xo(){Li=!0}function Ki(e){return M.resolve(gr(e&&e.tmpdir||pr.tmpdir()))}process.addListener(Fo,Ho);Object.defineProperty(Y.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return Ki()}});Y.exports.dir=Wo;Y.exports.dirSync=zo;Y.exports.file=Vo;Y.exports.fileSync=Ko;Y.exports.tmpName=mr;Y.exports.tmpNameSync=vr;Y.exports.setGracefulCleanup=Xo});var x=ae(Qe()),Hi=require("child_process"),Qi=require("fs/promises"),he=require("process");var Rn=require("child_process"),Tn="tempdir",kn="systemd";function ee(e,t){let r=(0,Rn.spawn)("sudo",e,{stdio:["ignore","ignore",t?.ignoreStderr?"ignore":"inherit"]});return new Promise((n,i)=>{r.on("close",s=>{s===0?n():i(new Error(e[0]+" exited with "+s))})})}var Ae=ae(Qe()),Re=require("fs/promises"),ot=ae(require("path")),zi=ae(Wi());async function Ji(e){let{substituters:t,trustedPublicKeys:r,secretKeys:n,awsAccessKeyId:i,awsSecretAccessKey:s}=e,a="extra-substituters = "+t.join(" ")+`
`;r&&(a+="extra-trusted-public-keys = "+r.join(" ")+`
`);let u=null,o=null;try{let c=i&&s;if((n||c)&&(u=await new Promise((l,h)=>{(0,zi.dir)({keep:!0,prefix:"setup-nix-cache-action"},(d,p)=>{d?h(d):l(p)})}),c&&(o=ot.join(u,"aws-credentials"),await(0,Re.writeFile)(o,`[default]
aws_access_key_id = ${i}
aws_secret_access_key = ${s}
`,{mode:384}),(0,Ae.debug)("Wrote "+o)),n)){let l=[];for(let d=0;d<n.length;d++){let p=n[d],v=ot.join(u,"secret-key"+d);await(0,Re.writeFile)(v,p,{mode:384}),(0,Ae.debug)("Wrote "+v),l.push(v)}a+="extra-secret-key-files = "+l.join(" ")+`
`;let h=`#!/bin/bash
set -euo pipefail
echo "Uploading paths: $OUT_PATHS" 1>&2
`;c&&(h+=`export AWS_SHARED_CREDENTIALS_FILE='${o}'
`),h+=`echo "$OUT_PATHS" | xargs /nix/var/nix/profiles/default/bin/nix \\
  --extra-experimental-features nix-command \\
  copy --to '${t[0]}' 1>&2
`;let f=ot.join(u,"post-build-hook");await(0,Re.writeFile)(f,h,{mode:493}),(0,Ae.debug)("Wrote "+f),a+="post-build-hook = "+f+`
`}return{config:a,tempDir:u,credsPath:o}}catch(c){throw u&&await(0,Re.rm)(u,{recursive:!0,force:!0}).catch(l=>{(0,Ae.warning)(l)}),c}}async function Yi(e,t,r){let n=r?.append?["tee","-a",e]:["tee",e],i=(0,Hi.spawn)("sudo",n,{stdio:["pipe","ignore","inherit"]}),s=new Promise((a,u)=>{i.on("close",o=>{o===0?a():u(new Error("tee exited with "+o))})});try{await new Promise((a,u)=>{i.stdin.write(t,o=>{o?u(o):a()})}),await new Promise(a=>{i.stdin.end(a)})}catch(a){throw i.kill(),a}finally{await s}}async function Zo(){if(he.platform==="linux"){if(!await ee(["systemctl","cat","nix-daemon.service"],{ignoreStderr:!0}).then(()=>!0,()=>!1))return;(0,x.info)("Restarting Nix daemon..."),await ee(["systemctl","daemon-reload"]),await ee(["systemctl","restart","nix-daemon.service"])}else if(he.platform==="darwin"){if(!await(0,Qi.stat)("/Library/LaunchDaemons/org.nixos.nix-daemon.plist").then(()=>!0,()=>!1))return;(0,x.info)("Restarting Nix daemon..."),await ee(["launchctl","kickstart","-k","system/org.nixos.nix-daemon"])}else throw new Error("cannot restart Nix daemon on unknown platform "+he.platform)}function yr(e){return e=e.trim(),e?e.split(/\s+/):[]}(async()=>{try{(0,x.info)("Generating configuration...");let{config:e,tempDir:t,credsPath:r}=await Ji({substituters:yr((0,x.getInput)("substituters",{required:!0})),trustedPublicKeys:yr((0,x.getInput)("trusted_public_keys")),secretKeys:yr((0,x.getInput)("secret_keys")),awsAccessKeyId:(0,x.getInput)("aws_access_key_id"),awsSecretAccessKey:(0,x.getInput)("aws_secret_access_key")});if(t&&(ee(["chown","-R","root:root",t]),(0,x.saveState)(Tn,t)),(0,x.info)("Saving configuration..."),await ee(["mkdir","-p","/etc/nix"]),await Yi("/etc/nix/nix.conf",e,{append:!0}),r&&he.platform==="linux"){if(he.platform!=="linux")throw new Error("Private substituters not supported on "+he.platform);await ee(["mkdir","-p","/etc/systemd/system/nix-daemon.service.d"]);let n="/etc/systemd/system/nix-daemon.service.d/aws-credentials.conf";await Yi(n,`[Service]
Environment=AWS_SHARED_CREDENTIALS_FILE=`+r+`
`),(0,x.saveState)(kn,n)}await Zo(),(0,x.info)("Done!")}catch(e){e instanceof Error?(0,x.setFailed)(e.message):(0,x.setFailed)(e+"")}})();
/**
@license
Copyright 2022 Ross Light

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

SPDX-License-Identifier: Apache-2.0
**/
/*! Bundled license information:

tmp/lib/tmp.js:
  (*!
   * Tmp
   *
   * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
   *
   * MIT Licensed
   *)
*/
