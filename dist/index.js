var ni=Object.create;var Ye=Object.defineProperty,ii=Object.defineProperties,si=Object.getOwnPropertyDescriptor,ai=Object.getOwnPropertyDescriptors,oi=Object.getOwnPropertyNames,Vt=Object.getOwnPropertySymbols,ui=Object.getPrototypeOf,Xt=Object.prototype.hasOwnProperty,ci=Object.prototype.propertyIsEnumerable;var Qt=(e,t,r)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Yt=(e,t)=>{for(var r in t||(t={}))Xt.call(t,r)&&Qt(e,r,t[r]);if(Vt)for(var r of Vt(t))ci.call(t,r)&&Qt(e,r,t[r]);return e},Zt=(e,t)=>ii(e,ai(t));var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var li=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of oi(t))!Xt.call(e,i)&&i!==r&&Ye(e,i,{get:()=>t[i],enumerable:!(n=si(t,i))||n.enumerable});return e};var Ne=(e,t,r)=>(r=e!=null?ni(ui(e)):{},li(t||!e||!e.__esModule?Ye(r,"default",{value:e,enumerable:!0}):r,e));var qe=w(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.toCommandProperties=se.toCommandValue=void 0;function fi(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}se.toCommandValue=fi;function hi(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}se.toCommandProperties=hi});var rr=w(I=>{"use strict";var di=I&&I.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),pi=I&&I.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mi=I&&I.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&di(t,e,r);return pi(t,e),t};Object.defineProperty(I,"__esModule",{value:!0});I.issue=I.issueCommand=void 0;var vi=mi(require("os")),er=qe();function tr(e,t,r){let n=new Ze(e,t,r);process.stdout.write(n.toString()+vi.EOL)}I.issueCommand=tr;function gi(e,t=""){tr(e,{},t)}I.issue=gi;var Ht="::",Ze=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=Ht+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let i=this.properties[n];i&&(r?r=!1:t+=",",t+=`${n}=${_i(i)}`)}}return t+=`${Ht}${yi(this.message)}`,t}};function yi(e){return er.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function _i(e){return er.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var sr=w(L=>{"use strict";var wi=L&&L.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ei=L&&L.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ir=L&&L.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&wi(t,e,r);return Ei(t,e),t};Object.defineProperty(L,"__esModule",{value:!0});L.issueCommand=void 0;var nr=ir(require("fs")),bi=ir(require("os")),Si=qe();function Oi(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!nr.existsSync(r))throw new Error(`Missing file at path: ${r}`);nr.appendFileSync(r,`${Si.toCommandValue(t)}${bi.EOL}`,{encoding:"utf8"})}L.issueCommand=Oi});var or=w(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});function Ai(e){let t=e.protocol==="https:",r;if(ar(e))return r;let n;return t?n=process.env.https_proxy||process.env.HTTPS_PROXY:n=process.env.http_proxy||process.env.HTTP_PROXY,n&&(r=new URL(n)),r}De.getProxyUrl=Ai;function ar(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let i of t.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(n.some(s=>s===i))return!0;return!1}De.checkBypass=ar});var fr=w(ae=>{"use strict";var Ia=require("net"),ki=require("tls"),He=require("http"),ur=require("https"),Ti=require("events"),Pa=require("assert"),Ri=require("util");ae.httpOverHttp=Ni;ae.httpsOverHttp=qi;ae.httpOverHttps=Di;ae.httpsOverHttps=xi;function Ni(e){var t=new B(e);return t.request=He.request,t}function qi(e){var t=new B(e);return t.request=He.request,t.createSocket=cr,t.defaultPort=443,t}function Di(e){var t=new B(e);return t.request=ur.request,t}function xi(e){var t=new B(e);return t.request=ur.request,t.createSocket=cr,t.defaultPort=443,t}function B(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||He.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,i,s,a){for(var u=lr(i,s,a),o=0,c=t.requests.length;o<c;++o){var l=t.requests[o];if(l.host===u.host&&l.port===u.port){t.requests.splice(o,1),l.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}Ri.inherits(B,Ti.EventEmitter);B.prototype.addRequest=function(t,r,n,i){var s=this,a=et({request:t},s.options,lr(r,n,i));if(s.sockets.length>=this.maxSockets){s.requests.push(a);return}s.createSocket(a,function(u){u.on("free",o),u.on("close",c),u.on("agentRemove",c),t.onSocket(u);function o(){s.emit("free",u,a)}function c(l){s.removeSocket(u),u.removeListener("free",o),u.removeListener("close",c),u.removeListener("agentRemove",c)}})};B.prototype.createSocket=function(t,r){var n=this,i={};n.sockets.push(i);var s=et({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),K("making CONNECT request");var a=n.request(s);a.useChunkedEncodingByDefault=!1,a.once("response",u),a.once("upgrade",o),a.once("connect",c),a.once("error",l),a.end();function u(h){h.upgrade=!0}function o(h,f,d){process.nextTick(function(){c(h,f,d)})}function c(h,f,d){if(a.removeAllListeners(),f.removeAllListeners(),h.statusCode!==200){K("tunneling socket could not be established, statusCode=%d",h.statusCode),f.destroy();var p=new Error("tunneling socket could not be established, statusCode="+h.statusCode);p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(i);return}if(d.length>0){K("got illegal response body from proxy"),f.destroy();var p=new Error("got illegal response body from proxy");p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(i);return}return K("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=f,r(f)}function l(h){a.removeAllListeners(),K(`tunneling socket could not be established, cause=%s
`,h.message,h.stack);var f=new Error("tunneling socket could not be established, cause="+h.message);f.code="ECONNRESET",t.request.emit("error",f),n.removeSocket(i)}};B.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(i){n.request.onSocket(i)})}};function cr(e,t){var r=this;B.prototype.createSocket.call(r,e,function(n){var i=e.request.getHeader("host"),s=et({},r.options,{socket:n,servername:i?i.replace(/:.*$/,""):e.host}),a=ki.connect(0,s);r.sockets[r.sockets.indexOf(n)]=a,t(a)})}function lr(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function et(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var i=Object.keys(n),s=0,a=i.length;s<a;++s){var u=i[s];n[u]!==void 0&&(e[u]=n[u])}}return e}var K;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?K=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:K=function(){};ae.debug=K});var dr=w((ja,hr)=>{hr.exports=fr()});var mr=w(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var xe=require("http"),tt=require("https"),pr=or(),oe,M;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(M=D.HttpCodes||(D.HttpCodes={}));var N;(function(e){e.Accept="accept",e.ContentType="content-type"})(N=D.Headers||(D.Headers={}));var W;(function(e){e.ApplicationJson="application/json"})(W=D.MediaTypes||(D.MediaTypes={}));function Ii(e){let t=pr.getProxyUrl(new URL(e));return t?t.href:""}D.getProxyUrl=Ii;var Pi=[M.MovedPermanently,M.ResourceMoved,M.SeeOther,M.TemporaryRedirect,M.PermanentRedirect],Ci=[M.BadGateway,M.ServiceUnavailable,M.GatewayTimeout],ji=["OPTIONS","GET","DELETE","HEAD"],Mi=10,Li=5,ue=class extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,ue.prototype)}};D.HttpClientError=ue;var Ie=class{constructor(t){this.message=t}readBody(){return new Promise(async(t,r)=>{let n=Buffer.alloc(0);this.message.on("data",i=>{n=Buffer.concat([n,i])}),this.message.on("end",()=>{t(n.toString())})})}};D.HttpClientResponse=Ie;function Ui(e){return new URL(e).protocol==="https:"}D.isHttps=Ui;var _e=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return this.request("OPTIONS",t,null,r||{})}get(t,r){return this.request("GET",t,null,r||{})}del(t,r){return this.request("DELETE",t,null,r||{})}post(t,r,n){return this.request("POST",t,r,n||{})}patch(t,r,n){return this.request("PATCH",t,r,n||{})}put(t,r,n){return this.request("PUT",t,r,n||{})}head(t,r){return this.request("HEAD",t,null,r||{})}sendStream(t,r,n,i){return this.request(t,r,n,i)}async getJson(t,r={}){r[N.Accept]=this._getExistingOrDefaultHeader(r,N.Accept,W.ApplicationJson);let n=await this.get(t,r);return this._processResponse(n,this.requestOptions)}async postJson(t,r,n={}){let i=JSON.stringify(r,null,2);n[N.Accept]=this._getExistingOrDefaultHeader(n,N.Accept,W.ApplicationJson),n[N.ContentType]=this._getExistingOrDefaultHeader(n,N.ContentType,W.ApplicationJson);let s=await this.post(t,i,n);return this._processResponse(s,this.requestOptions)}async putJson(t,r,n={}){let i=JSON.stringify(r,null,2);n[N.Accept]=this._getExistingOrDefaultHeader(n,N.Accept,W.ApplicationJson),n[N.ContentType]=this._getExistingOrDefaultHeader(n,N.ContentType,W.ApplicationJson);let s=await this.put(t,i,n);return this._processResponse(s,this.requestOptions)}async patchJson(t,r,n={}){let i=JSON.stringify(r,null,2);n[N.Accept]=this._getExistingOrDefaultHeader(n,N.Accept,W.ApplicationJson),n[N.ContentType]=this._getExistingOrDefaultHeader(n,N.ContentType,W.ApplicationJson);let s=await this.patch(t,i,n);return this._processResponse(s,this.requestOptions)}async request(t,r,n,i){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),a=this._prepareRequest(t,s,i),u=this._allowRetries&&ji.indexOf(t)!=-1?this._maxRetries+1:1,o=0,c;for(;o<u;){if(c=await this.requestRaw(a,n),c&&c.message&&c.message.statusCode===M.Unauthorized){let h;for(let f=0;f<this.handlers.length;f++)if(this.handlers[f].canHandleAuthentication(c)){h=this.handlers[f];break}return h?h.handleAuthentication(this,a,n):c}let l=this._maxRedirects;for(;Pi.indexOf(c.message.statusCode)!=-1&&this._allowRedirects&&l>0;){let h=c.message.headers.location;if(!h)break;let f=new URL(h);if(s.protocol=="https:"&&s.protocol!=f.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(await c.readBody(),f.hostname!==s.hostname)for(let d in i)d.toLowerCase()==="authorization"&&delete i[d];a=this._prepareRequest(t,f,i),c=await this.requestRaw(a,n),l--}if(Ci.indexOf(c.message.statusCode)==-1)return c;o+=1,o<u&&(await c.readBody(),await this._performExponentialBackoff(o))}return c}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return new Promise((n,i)=>{let s=function(a,u){a&&i(a),n(u)};this.requestRawWithCallback(t,r,s)})}requestRawWithCallback(t,r,n){let i;typeof r=="string"&&(t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let s=!1,a=(o,c)=>{s||(s=!0,n(o,c))},u=t.httpModule.request(t.options,o=>{let c=new Ie(o);a(null,c)});u.on("socket",o=>{i=o}),u.setTimeout(this._socketTimeout||3*6e4,()=>{i&&i.end(),a(new Error("Request timeout: "+t.options.path),null)}),u.on("error",function(o){a(o,null)}),r&&typeof r=="string"&&u.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){u.end()}),r.pipe(u)):u.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let i={};i.parsedUrl=r;let s=i.parsedUrl.protocol==="https:";i.httpModule=s?tt:xe;let a=s?443:80;return i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):a,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=t,i.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(i.options.headers["user-agent"]=this.userAgent),i.options.agent=this._getAgent(i.parsedUrl),this.handlers&&this.handlers.forEach(u=>{u.prepareRequest(i.options)}),i}_mergeHeaders(t){let r=n=>Object.keys(n).reduce((i,s)=>(i[s.toLowerCase()]=n[s],i),{});return this.requestOptions&&this.requestOptions.headers?Object.assign({},r(this.requestOptions.headers),r(t)):r(t||{})}_getExistingOrDefaultHeader(t,r,n){let i=a=>Object.keys(a).reduce((u,o)=>(u[o.toLowerCase()]=a[o],u),{}),s;return this.requestOptions&&this.requestOptions.headers&&(s=i(this.requestOptions.headers)[r]),t[r]||s||n}_getAgent(t){let r,n=pr.getProxyUrl(t),i=n&&n.hostname;if(this._keepAlive&&i&&(r=this._proxyAgent),this._keepAlive&&!i&&(r=this._agent),r)return r;let s=t.protocol==="https:",a=100;if(this.requestOptions&&(a=this.requestOptions.maxSockets||xe.globalAgent.maxSockets),i){oe||(oe=dr());let u={maxSockets:a,keepAlive:this._keepAlive,proxy:Zt(Yt({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},o,c=n.protocol==="https:";s?o=c?oe.httpsOverHttps:oe.httpsOverHttp:o=c?oe.httpOverHttps:oe.httpOverHttp,r=o(u),this._proxyAgent=r}if(this._keepAlive&&!r){let u={keepAlive:this._keepAlive,maxSockets:a};r=s?new tt.Agent(u):new xe.Agent(u),this._agent=r}return r||(r=s?tt.globalAgent:xe.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){t=Math.min(Mi,t);let r=Li*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))}static dateTimeDeserializer(t,r){if(typeof r=="string"){let n=new Date(r);if(!isNaN(n.valueOf()))return n}return r}async _processResponse(t,r){return new Promise(async(n,i)=>{let s=t.message.statusCode,a={statusCode:s,result:null,headers:{}};s==M.NotFound&&n(a);let u,o;try{o=await t.readBody(),o&&o.length>0&&(r&&r.deserializeDates?u=JSON.parse(o,_e.dateTimeDeserializer):u=JSON.parse(o),a.result=u),a.headers=t.message.headers}catch{}if(s>299){let c;u&&u.message?c=u.message:o&&o.length>0?c=o:c="Failed request: ("+s+")";let l=new ue(c,s);l.result=a.result,i(l)}else n(a)})}};D.HttpClient=_e});var vr=w(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});var rt=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){t.headers.Authorization="Basic "+Buffer.from(this.username+":"+this.password).toString("base64")}canHandleAuthentication(t){return!1}handleAuthentication(t,r,n){return null}};we.BasicCredentialHandler=rt;var nt=class{constructor(t){this.token=t}prepareRequest(t){t.headers.Authorization="Bearer "+this.token}canHandleAuthentication(t){return!1}handleAuthentication(t,r,n){return null}};we.BearerCredentialHandler=nt;var it=class{constructor(t){this.token=t}prepareRequest(t){t.headers.Authorization="Basic "+Buffer.from("PAT:"+this.token).toString("base64")}canHandleAuthentication(t){return!1}handleAuthentication(t,r,n){return null}};we.PersonalAccessTokenCredentialHandler=it});var _r=w(ce=>{"use strict";var gr=ce&&ce.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function u(l){try{c(n.next(l))}catch(h){a(h)}}function o(l){try{c(n.throw(l))}catch(h){a(h)}}function c(l){l.done?s(l.value):i(l.value).then(u,o)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(ce,"__esModule",{value:!0});ce.OidcClient=void 0;var Gi=mr(),Bi=vr(),yr=Pe(),z=class{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new Gi.HttpClient("actions/oidc-client",[new Bi.BearerCredentialHandler(z.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return gr(this,void 0,void 0,function*(){let s=(r=(yield z.createHttpClient().getJson(t).catch(a=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${a.statusCode}
 
        Error Message: ${a.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return gr(this,void 0,void 0,function*(){try{let r=z.getIDTokenUrl();if(t){let i=encodeURIComponent(t);r=`${r}&audience=${i}`}yr.debug(`ID token url is ${r}`);let n=yield z.getCall(r);return yr.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};ce.OidcClient=z});var Pe=w(m=>{"use strict";var $i=m&&m.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Fi=m&&m.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wr=m&&m.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&$i(t,e,r);return Fi(t,e),t},Er=m&&m.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function u(l){try{c(n.next(l))}catch(h){a(h)}}function o(l){try{c(n.throw(l))}catch(h){a(h)}}function c(l){l.done?s(l.value):i(l.value).then(u,o)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(m,"__esModule",{value:!0});m.getIDToken=m.getState=m.saveState=m.group=m.endGroup=m.startGroup=m.info=m.notice=m.warning=m.error=m.debug=m.isDebug=m.setFailed=m.setCommandEcho=m.setOutput=m.getBooleanInput=m.getMultilineInput=m.getInput=m.addPath=m.setSecret=m.exportVariable=m.ExitCode=void 0;var P=rr(),br=sr(),je=qe(),Ce=wr(require("os")),Ki=wr(require("path")),Wi=_r(),Sr;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Sr=m.ExitCode||(m.ExitCode={}));function zi(e,t){let r=je.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||""){let i="_GitHubActionsFileCommandDelimeter_",s=`${e}<<${i}${Ce.EOL}${r}${Ce.EOL}${i}`;br.issueCommand("ENV",s)}else P.issueCommand("set-env",{name:e},r)}m.exportVariable=zi;function Ji(e){P.issueCommand("add-mask",{},e)}m.setSecret=Ji;function Vi(e){process.env.GITHUB_PATH||""?br.issueCommand("PATH",e):P.issueCommand("add-path",{},e),process.env.PATH=`${e}${Ki.delimiter}${process.env.PATH}`}m.addPath=Vi;function st(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}m.getInput=st;function Qi(e,t){return st(e,t).split(`
`).filter(n=>n!=="")}m.getMultilineInput=Qi;function Xi(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],i=st(e,t);if(r.includes(i))return!0;if(n.includes(i))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}m.getBooleanInput=Xi;function Yi(e,t){process.stdout.write(Ce.EOL),P.issueCommand("set-output",{name:e},t)}m.setOutput=Yi;function Zi(e){P.issue("echo",e?"on":"off")}m.setCommandEcho=Zi;function Hi(e){process.exitCode=Sr.Failure,Or(e)}m.setFailed=Hi;function es(){return process.env.RUNNER_DEBUG==="1"}m.isDebug=es;function ts(e){P.issueCommand("debug",{},e)}m.debug=ts;function Or(e,t={}){P.issueCommand("error",je.toCommandProperties(t),e instanceof Error?e.toString():e)}m.error=Or;function rs(e,t={}){P.issueCommand("warning",je.toCommandProperties(t),e instanceof Error?e.toString():e)}m.warning=rs;function ns(e,t={}){P.issueCommand("notice",je.toCommandProperties(t),e instanceof Error?e.toString():e)}m.notice=ns;function is(e){process.stdout.write(e+Ce.EOL)}m.info=is;function Ar(e){P.issue("group",e)}m.startGroup=Ar;function kr(){P.issue("endgroup")}m.endGroup=kr;function ss(e,t){return Er(this,void 0,void 0,function*(){Ar(e);let r;try{r=yield t()}finally{kr()}return r})}m.group=ss;function as(e,t){P.issueCommand("save-state",{name:e},t)}m.saveState=as;function os(e){return process.env[`STATE_${e}`]||""}m.getState=os;function us(e){return Er(this,void 0,void 0,function*(){return yield Wi.OidcClient.getIDToken(e)})}m.getIDToken=us});var qr=w(at=>{var H=require("path"),Q=process.platform==="win32",V=require("fs"),cs=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function ls(){var e;if(cs){var t=new Error;e=r}else e=n;return e;function r(i){i&&(t.message=i.message,i=t,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var s="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function fs(e){return typeof e=="function"?e:ls()}var $a=H.normalize;Q?$=/(.*?)(?:[\/\\]+|$)/g:$=/(.*?)(?:[\/]+|$)/g;var $;Q?Ee=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:Ee=/^[\/]*/;var Ee;at.realpathSync=function(t,r){if(t=H.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];var n=t,i={},s={},a,u,o,c;l();function l(){var g=Ee.exec(t);a=g[0].length,u=g[0],o=g[0],c="",Q&&!s[o]&&(V.lstatSync(o),s[o]=!0)}for(;a<t.length;){$.lastIndex=a;var h=$.exec(t);if(c=u,u+=h[0],o=c+h[1],a=$.lastIndex,!(s[o]||r&&r[o]===o)){var f;if(r&&Object.prototype.hasOwnProperty.call(r,o))f=r[o];else{var d=V.lstatSync(o);if(!d.isSymbolicLink()){s[o]=!0,r&&(r[o]=o);continue}var p=null;if(!Q){var v=d.dev.toString(32)+":"+d.ino.toString(32);i.hasOwnProperty(v)&&(p=i[v])}p===null&&(V.statSync(o),p=V.readlinkSync(o)),f=H.resolve(c,p),r&&(r[o]=f),Q||(i[v]=p)}t=H.resolve(f,t.slice(a)),l()}}return r&&(r[n]=t),t};at.realpath=function(t,r,n){if(typeof n!="function"&&(n=fs(r),r=null),t=H.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return process.nextTick(n.bind(null,null,r[t]));var i=t,s={},a={},u,o,c,l;h();function h(){var g=Ee.exec(t);u=g[0].length,o=g[0],c=g[0],l="",Q&&!a[c]?V.lstat(c,function(_){if(_)return n(_);a[c]=!0,f()}):process.nextTick(f)}function f(){if(u>=t.length)return r&&(r[i]=t),n(null,t);$.lastIndex=u;var g=$.exec(t);return l=o,o+=g[0],c=l+g[1],u=$.lastIndex,a[c]||r&&r[c]===c?process.nextTick(f):r&&Object.prototype.hasOwnProperty.call(r,c)?v(r[c]):V.lstat(c,d)}function d(g,_){if(g)return n(g);if(!_.isSymbolicLink())return a[c]=!0,r&&(r[c]=c),process.nextTick(f);if(!Q){var b=_.dev.toString(32)+":"+_.ino.toString(32);if(s.hasOwnProperty(b))return p(null,s[b],c)}V.stat(c,function(R){if(R)return n(R);V.readlink(c,function(O,j){Q||(s[b]=j),p(O,j)})})}function p(g,_,b){if(g)return n(g);var R=H.resolve(l,_);r&&(r[b]=R),v(R)}function v(g){t=H.resolve(g,t.slice(u)),h()}}});var lt=w((Ka,Pr)=>{Pr.exports=X;X.realpath=X;X.sync=ct;X.realpathSync=ct;X.monkeypatch=ds;X.unmonkeypatch=ps;var le=require("fs"),ot=le.realpath,ut=le.realpathSync,hs=process.version,Dr=/^v[0-5]\./.test(hs),xr=qr();function Ir(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function X(e,t,r){if(Dr)return ot(e,t,r);typeof t=="function"&&(r=t,t=null),ot(e,t,function(n,i){Ir(n)?xr.realpath(e,t,r):r(n,i)})}function ct(e,t){if(Dr)return ut(e,t);try{return ut(e,t)}catch(r){if(Ir(r))return xr.realpathSync(e,t);throw r}}function ds(){le.realpath=X,le.realpathSync=ct}function ps(){le.realpath=ot,le.realpathSync=ut}});var jr=w((Wa,Cr)=>{Cr.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=t(e[n],n);ms(i)?r.push.apply(r,i):r.push(i)}return r};var ms=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var Br=w((za,Gr)=>{"use strict";Gr.exports=Lr;function Lr(e,t,r){e instanceof RegExp&&(e=Mr(e,r)),t instanceof RegExp&&(t=Mr(t,r));var n=Ur(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function Mr(e,t){var r=t.match(e);return r?r[0]:null}Lr.range=Ur;function Ur(e,t,r){var n,i,s,a,u,o=r.indexOf(e),c=r.indexOf(t,o+1),l=o;if(o>=0&&c>0){if(e===t)return[o,c];for(n=[],s=r.length;l>=0&&!u;)l==o?(n.push(l),o=r.indexOf(e,l+1)):n.length==1?u=[n.pop(),c]:(i=n.pop(),i<s&&(s=i,a=c),c=r.indexOf(t,l+1)),l=o<c&&o>=0?o:c;n.length&&(u=[s,a])}return u}});var Qr=w((Ja,Vr)=>{var vs=jr(),$r=Br();Vr.exports=_s;var Fr="\0SLASH"+Math.random()+"\0",Kr="\0OPEN"+Math.random()+"\0",ht="\0CLOSE"+Math.random()+"\0",Wr="\0COMMA"+Math.random()+"\0",zr="\0PERIOD"+Math.random()+"\0";function ft(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function gs(e){return e.split("\\\\").join(Fr).split("\\{").join(Kr).split("\\}").join(ht).split("\\,").join(Wr).split("\\.").join(zr)}function ys(e){return e.split(Fr).join("\\").split(Kr).join("{").split(ht).join("}").split(Wr).join(",").split(zr).join(".")}function Jr(e){if(!e)return[""];var t=[],r=$r("{","}",e);if(!r)return e.split(",");var n=r.pre,i=r.body,s=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var u=Jr(s);return s.length&&(a[a.length-1]+=u.shift(),a.push.apply(a,u)),t.push.apply(t,a),t}function _s(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),fe(gs(e),!0).map(ys)):[]}function ws(e){return"{"+e+"}"}function Es(e){return/^-?0\d/.test(e)}function bs(e,t){return e<=t}function Ss(e,t){return e>=t}function fe(e,t){var r=[],n=$r("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),a=i||s,u=n.body.indexOf(",")>=0;if(!a&&!u)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+ht+n.post,fe(e)):[e];var o;if(a)o=n.body.split(/\.\./);else if(o=Jr(n.body),o.length===1&&(o=fe(o[0],!1).map(ws),o.length===1)){var l=n.post.length?fe(n.post,!1):[""];return l.map(function(Je){return n.pre+o[0]+Je})}var c=n.pre,l=n.post.length?fe(n.post,!1):[""],h;if(a){var f=ft(o[0]),d=ft(o[1]),p=Math.max(o[0].length,o[1].length),v=o.length==3?Math.abs(ft(o[2])):1,g=bs,_=d<f;_&&(v*=-1,g=Ss);var b=o.some(Es);h=[];for(var R=f;g(R,d);R+=v){var O;if(s)O=String.fromCharCode(R),O==="\\"&&(O="");else if(O=String(R),b){var j=p-O.length;if(j>0){var Te=new Array(j+1).join("0");R<0?O="-"+Te+O.slice(1):O=Te+O}}h.push(O)}}else h=vs(o,function(Re){return fe(Re,!1)});for(var ie=0;ie<h.length;ie++)for(var Z=0;Z<l.length;Z++){var G=c+h[ie]+l[Z];(!t||a||G)&&r.push(G)}return r}});var Le=w((Va,tn)=>{tn.exports=C;C.Minimatch=A;var be={sep:"/"};try{be=require("path")}catch{}var mt=C.GLOBSTAR=A.GLOBSTAR={},Os=Qr(),Xr={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},dt="[^/]",pt=dt+"*?",As="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ks="(?:(?!(?:\\/|^)\\.).)*?",Yr=Ts("().*{}+?[]^$\\!");function Ts(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var Hr=/\/+/;C.filter=Rs;function Rs(e,t){return t=t||{},function(r,n,i){return C(r,e,t)}}function Zr(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach(function(n){r[n]=t[n]}),Object.keys(e).forEach(function(n){r[n]=e[n]}),r}C.defaults=function(e){if(!e||!Object.keys(e).length)return C;var t=C,r=function(i,s,a){return t.minimatch(i,s,Zr(e,a))};return r.Minimatch=function(i,s){return new t.Minimatch(i,Zr(e,s))},r};A.defaults=function(e){return!e||!Object.keys(e).length?A:C.defaults(e).Minimatch};function C(e,t,r){if(typeof t!="string")throw new TypeError("glob pattern string required");return r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:t.trim()===""?e==="":new A(t,r).match(e)}function A(e,t){if(!(this instanceof A))return new A(e,t);if(typeof e!="string")throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),be.sep!=="/"&&(e=e.split(be.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}A.prototype.debug=function(){};A.prototype.make=Ns;function Ns(){if(!this._made){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(Hr)}),this.debug(this.pattern,r),r=r.map(function(n,i,s){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}}A.prototype.parseNegate=qs;function qs(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,s=e.length;i<s&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}C.braceExpand=function(e,t){return en(e,t)};A.prototype.braceExpand=en;function en(e,t){if(t||(this instanceof A?t=this.options:t={}),e=typeof e>"u"?this.pattern:e,typeof e>"u")throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:Os(e)}A.prototype.parse=Ds;var Me={};function Ds(e,t){if(e.length>1024*64)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&e==="**")return mt;if(e==="")return"";var n="",i=!!r.nocase,s=!1,a=[],u=[],o,c=!1,l=-1,h=-1,f=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",d=this;function p(){if(o){switch(o){case"*":n+=pt,i=!0;break;case"?":n+=dt,i=!0;break;default:n+="\\"+o;break}d.debug("clearStateChar %j %j",o,n),o=!1}}for(var v=0,g=e.length,_;v<g&&(_=e.charAt(v));v++){if(this.debug("%s	%s %s %j",e,v,n,_),s&&Yr[_]){n+="\\"+_,s=!1;continue}switch(_){case"/":return!1;case"\\":p(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,v,n,_),c){this.debug("  in class"),_==="!"&&v===h+1&&(_="^"),n+=_;continue}d.debug("call clearStateChar %j",o),p(),o=_,r.noext&&p();continue;case"(":if(c){n+="(";continue}if(!o){n+="\\(";continue}a.push({type:o,start:v-1,reStart:n.length,open:Xr[o].open,close:Xr[o].close}),n+=o==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",o,n),o=!1;continue;case")":if(c||!a.length){n+="\\)";continue}p(),i=!0;var b=a.pop();n+=b.close,b.type==="!"&&u.push(b),b.reEnd=n.length;continue;case"|":if(c||!a.length||s){n+="\\|",s=!1;continue}p(),n+="|";continue;case"[":if(p(),c){n+="\\"+_;continue}c=!0,h=v,l=n.length,n+=_;continue;case"]":if(v===h+1||!c){n+="\\"+_,s=!1;continue}if(c){var R=e.substring(h+1,v);try{RegExp("["+R+"]")}catch{var O=this.parse(R,Me);n=n.substr(0,l)+"\\["+O[0]+"\\]",i=i||O[1],c=!1;continue}}i=!0,c=!1,n+=_;continue;default:p(),s?s=!1:Yr[_]&&!(_==="^"&&c)&&(n+="\\"),n+=_}}for(c&&(R=e.substr(h+1),O=this.parse(R,Me),n=n.substr(0,l)+"\\["+O[0],i=i||O[1]),b=a.pop();b;b=a.pop()){var j=n.slice(b.reStart+b.open.length);this.debug("setting tail",n,b),j=j.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(zt,Jt,Xe){return Xe||(Xe="\\"),Jt+Jt+Xe+"|"}),this.debug(`tail=%j
   %s`,j,j,b,n);var Te=b.type==="*"?pt:b.type==="?"?dt:"\\"+b.type;i=!0,n=n.slice(0,b.reStart)+Te+"\\("+j}p(),s&&(n+="\\\\");var ie=!1;switch(n.charAt(0)){case".":case"[":case"(":ie=!0}for(var Z=u.length-1;Z>-1;Z--){var G=u[Z],Re=n.slice(0,G.reStart),Je=n.slice(G.reStart,G.reEnd-8),Kt=n.slice(G.reEnd-8,G.reEnd),ye=n.slice(G.reEnd);Kt+=ye;var ei=Re.split("(").length-1,Ve=ye;for(v=0;v<ei;v++)Ve=Ve.replace(/\)[+*?]?/,"");ye=Ve;var Wt="";ye===""&&t!==Me&&(Wt="$");var ti=Re+Je+ye+Wt+Kt;n=ti}if(n!==""&&i&&(n="(?=.)"+n),ie&&(n=f+n),t===Me)return[n,i];if(!i)return Ps(e);var ri=r.nocase?"i":"";try{var Qe=new RegExp("^"+n+"$",ri)}catch{return new RegExp("$.")}return Qe._glob=e,Qe._src=n,Qe}C.makeRe=function(e,t){return new A(e,t||{}).makeRe()};A.prototype.makeRe=xs;function xs(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?pt:t.dot?As:ks,n=t.nocase?"i":"",i=e.map(function(s){return s.map(function(a){return a===mt?r:typeof a=="string"?Cs(a):a._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}C.match=function(e,t,r){r=r||{};var n=new A(t,r);return e=e.filter(function(i){return n.match(i)}),n.options.nonull&&!e.length&&e.push(t),e};A.prototype.match=Is;function Is(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;var r=this.options;be.sep!=="/"&&(e=e.split(be.sep).join("/")),e=e.split(Hr),this.debug(this.pattern,"split",e);var n=this.set;this.debug(this.pattern,"set",n);var i,s;for(s=e.length-1;s>=0&&(i=e[s],!i);s--);for(s=0;s<n.length;s++){var a=n[s],u=e;r.matchBase&&a.length===1&&(u=[i]);var o=this.matchOne(u,a,t);if(o)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}A.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,a=e.length,u=t.length;i<a&&s<u;i++,s++){this.debug("matchOne loop");var o=t[s],c=e[i];if(this.debug(t,o,c),o===!1)return!1;if(o===mt){this.debug("GLOBSTAR",[t,o,c]);var l=i,h=s+1;if(h===u){for(this.debug("** at the end");i<a;i++)if(e[i]==="."||e[i]===".."||!n.dot&&e[i].charAt(0)===".")return!1;return!0}for(;l<a;){var f=e[l];if(this.debug(`
globstar while`,e,l,t,h,f),this.matchOne(e.slice(l),t.slice(h),r))return this.debug("globstar found match!",l,a,f),!0;if(f==="."||f===".."||!n.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,l,t,h);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,l,t,h),l===a))}var d;if(typeof o=="string"?(n.nocase?d=c.toLowerCase()===o.toLowerCase():d=c===o,this.debug("string match",o,c,d)):(d=c.match(o),this.debug("pattern match",o,c,d)),!d)return!1}if(i===a&&s===u)return!0;if(i===a)return r;if(s===u){var p=i===a-1&&e[i]==="";return p}throw new Error("wtf?")};function Ps(e){return e.replace(/\\(.)/g,"$1")}function Cs(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var rn=w((Qa,vt)=>{typeof Object.create=="function"?vt.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:vt.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}});var nn=w((Xa,yt)=>{try{if(gt=require("util"),typeof gt.inherits!="function")throw"";yt.exports=gt.inherits}catch{yt.exports=rn()}var gt});var Ge=w((Ya,Ue)=>{"use strict";function sn(e){return e.charAt(0)==="/"}function an(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,r=t.exec(e),n=r[1]||"",i=Boolean(n&&n.charAt(1)!==":");return Boolean(r[2]||i)}Ue.exports=process.platform==="win32"?an:sn;Ue.exports.posix=sn;Ue.exports.win32=an});var wt=w(Y=>{Y.setopts=Bs;Y.ownProp=on;Y.makeAbs=Se;Y.finish=$s;Y.mark=Fs;Y.isIgnored=cn;Y.childrenIgnored=Ks;function on(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var js=require("fs"),he=require("path"),Ms=Le(),un=Ge(),_t=Ms.Minimatch;function Ls(e,t){return e.localeCompare(t,"en")}function Us(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(Gs))}function Gs(e){var t=null;if(e.slice(-3)==="/**"){var r=e.replace(/(\/\*\*)+$/,"");t=new _t(r,{dot:!0})}return{matcher:new _t(e,{dot:!0}),gmatcher:t}}function Bs(e,t,r){if(r||(r={}),r.matchBase&&t.indexOf("/")===-1){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=r.strict!==!1,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.fs=r.fs||js,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),Us(e,r),e.changedCwd=!1;var n=process.cwd();on(r,"cwd")?(e.cwd=he.resolve(r.cwd),e.changedCwd=e.cwd!==n):e.cwd=n,e.root=r.root||he.resolve(e.cwd,"/"),e.root=he.resolve(e.root),process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=un(e.cwd)?e.cwd:Se(e,e.cwd),process.platform==="win32"&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new _t(t,r),e.options=e.minimatch.options}function $s(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var s=e.matches[n];if(!s||Object.keys(s).length===0){if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}else{var u=Object.keys(s);t?r.push.apply(r,u):u.forEach(function(o){r[o]=!0})}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(Ls)),e.mark){for(var n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter(function(o){var c=!/\/$/.test(o),l=e.cache[o]||e.cache[Se(e,o)];return c&&l&&(c=l!=="DIR"&&!Array.isArray(l)),c}))}e.ignore.length&&(r=r.filter(function(o){return!cn(e,o)})),e.found=r}function Fs(e,t){var r=Se(e,t),n=e.cache[r],i=t;if(n){var s=n==="DIR"||Array.isArray(n),a=t.slice(-1)==="/";if(s&&!a?i+="/":!s&&a&&(i=i.slice(0,-1)),i!==t){var u=Se(e,i);e.statCache[u]=e.statCache[r],e.cache[u]=e.cache[r]}}return i}function Se(e,t){var r=t;return t.charAt(0)==="/"?r=he.join(e.root,t):un(t)||t===""?r=t:e.changedCwd?r=he.resolve(e.cwd,t):r=he.resolve(t),process.platform==="win32"&&(r=r.replace(/\\/g,"/")),r}function cn(e,t){return e.ignore.length?e.ignore.some(function(r){return r.matcher.match(t)||!!(r.gmatcher&&r.gmatcher.match(t))}):!1}function Ks(e,t){return e.ignore.length?e.ignore.some(function(r){return!!(r.gmatcher&&r.gmatcher.match(t))}):!1}});var pn=w((ro,dn)=>{dn.exports=hn;hn.GlobSync=S;var Ws=lt(),ln=Le(),Ha=ln.Minimatch,eo=St().Glob,to=require("util"),Et=require("path"),fn=require("assert"),Be=Ge(),ee=wt(),zs=ee.setopts,bt=ee.ownProp,Js=ee.childrenIgnored,Vs=ee.isIgnored;function hn(e,t){if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new S(e,t).found}function S(e,t){if(!e)throw new Error("must provide pattern");if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof S))return new S(e,t);if(zs(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}S.prototype._finish=function(){if(fn(this instanceof S),this.realpath){var e=this;this.matches.forEach(function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i);var s=Ws.realpathSync(i,e.realpathCache);n[s]=!0}catch(a){if(a.syscall==="stat")n[e._makeAbs(i)]=!0;else throw a}})}ee.finish(this)};S.prototype._process=function(e,t,r){fn(this instanceof S);for(var n=0;typeof e[n]=="string";)n++;var i;switch(n){case e.length:this._processSimple(e.join("/"),t);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var s=e.slice(n),a;i===null?a=".":((Be(i)||Be(e.join("/")))&&(!i||!Be(i))&&(i="/"+i),a=i);var u=this._makeAbs(a);if(!Js(this,a)){var o=s[0]===ln.GLOBSTAR;o?this._processGlobStar(i,a,u,s,t,r):this._processReaddir(i,a,u,s,t,r)}};S.prototype._processReaddir=function(e,t,r,n,i,s){var a=this._readdir(r,s);if(!!a){for(var u=n[0],o=!!this.minimatch.negate,c=u._glob,l=this.dot||c.charAt(0)===".",h=[],f=0;f<a.length;f++){var d=a[f];if(d.charAt(0)!=="."||l){var p;o&&!e?p=!d.match(u):p=d.match(u),p&&h.push(d)}}var v=h.length;if(v!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var f=0;f<v;f++){var d=h[f];e&&(e.slice(-1)!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=Et.join(this.root,d)),this._emitMatch(i,d)}return}n.shift();for(var f=0;f<v;f++){var d=h[f],g;e?g=[e,d]:g=[d],this._process(g.concat(n),i,s)}}}};S.prototype._emitMatch=function(e,t){if(!Vs(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}};S.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r,n;try{r=this.fs.lstatSync(e)}catch(s){if(s.code==="ENOENT")return null}var i=r&&r.isSymbolicLink();return this.symlinks[e]=i,!i&&r&&!r.isDirectory()?this.cache[e]="FILE":t=this._readdir(e,!1),t};S.prototype._readdir=function(e,t){var r;if(t&&!bt(this.symlinks,e))return this._readdirInGlobStar(e);if(bt(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};S.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t};S.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t);break}};S.prototype._processGlobStar=function(e,t,r,n,i,s){var a=this._readdir(r,s);if(!!a){var u=n.slice(1),o=e?[e]:[],c=o.concat(u);this._process(c,i,!1);var l=a.length,h=this.symlinks[r];if(!(h&&s))for(var f=0;f<l;f++){var d=a[f];if(!(d.charAt(0)==="."&&!this.dot)){var p=o.concat(a[f],u);this._process(p,i,!0);var v=o.concat(a[f],n);this._process(v,i,!0)}}}};S.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),!!r){if(e&&Be(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Et.join(this.root,e):(e=Et.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}};S.prototype._stat=function(e){var t=this._makeAbs(e),r=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&bt(this.cache,t)){var a=this.cache[t];if(Array.isArray(a)&&(a="DIR"),!r||a==="DIR")return a;if(r&&a==="FILE")return!1}var n,i=this.statCache[t];if(!i){var s;try{s=this.fs.lstatSync(t)}catch(u){if(u&&(u.code==="ENOENT"||u.code==="ENOTDIR"))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{i=this.fs.statSync(t)}catch{i=s}else i=s}this.statCache[t]=i;var a=!0;return i&&(a=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||a,r&&a==="FILE"?!1:a};S.prototype._mark=function(e){return ee.mark(this,e)};S.prototype._makeAbs=function(e){return ee.makeAbs(this,e)}});var Ot=w((no,vn)=>{vn.exports=mn;function mn(e,t){if(e&&t)return mn(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var s=e.apply(this,n),a=n[n.length-1];return typeof s=="function"&&s!==a&&Object.keys(a).forEach(function(u){s[u]=a[u]}),s}}});var kt=w((io,At)=>{var gn=Ot();At.exports=gn($e);At.exports.strict=gn(yn);$e.proto=$e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return $e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return yn(this)},configurable:!0})});function $e(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function yn(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}});var wn=w((so,_n)=>{var Qs=Ot(),Oe=Object.create(null),Xs=kt();_n.exports=Qs(Ys);function Ys(e,t){return Oe[e]?(Oe[e].push(t),null):(Oe[e]=[t],Zs(e))}function Zs(e){return Xs(function t(){var r=Oe[e],n=r.length,i=Hs(arguments);try{for(var s=0;s<n;s++)r[s].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick(function(){t.apply(null,i)})):delete Oe[e]}})}function Hs(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}});var St=w((uo,bn)=>{bn.exports=te;var ea=lt(),En=Le(),ao=En.Minimatch,ta=nn(),ra=require("events").EventEmitter,Tt=require("path"),Rt=require("assert"),Ae=Ge(),qt=pn(),re=wt(),na=re.setopts,Nt=re.ownProp,Dt=wn(),oo=require("util"),ia=re.childrenIgnored,sa=re.isIgnored,aa=kt();function te(e,t,r){if(typeof t=="function"&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return qt(e,t)}return new y(e,t,r)}te.sync=qt;var oa=te.GlobSync=qt.GlobSync;te.glob=te;function ua(e,t){if(t===null||typeof t!="object")return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}te.hasMagic=function(e,t){var r=ua({},t);r.noprocess=!0;var n=new y(e,r),i=n.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var s=0;s<i[0].length;s++)if(typeof i[0][s]!="string")return!0;return!1};te.Glob=y;ta(y,ra);function y(e,t,r){if(typeof t=="function"&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new oa(e,t)}if(!(this instanceof y))return new y(e,t,r);na(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof r=="function"&&(r=aa(r),this.on("error",r),this.on("end",function(o){r(null,o)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return u();for(var s=!0,a=0;a<n;a++)this._process(this.minimatch.set[a],a,!1,u);s=!1;function u(){--i._processing,i._processing<=0&&(s?process.nextTick(function(){i._finish()}):i._finish())}}y.prototype._finish=function(){if(Rt(this instanceof y),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();re.finish(this),this.emit("end",this.found)}};y.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n);function n(){--e===0&&t._finish()}};y.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,s=n.length;if(s===0)return t();var a=this.matches[e]=Object.create(null);n.forEach(function(u,o){u=i._makeAbs(u),ea.realpath(u,i.realpathCache,function(c,l){c?c.syscall==="stat"?a[u]=!0:i.emit("error",c):a[l]=!0,--s===0&&(i.matches[e]=a,t())})})};y.prototype._mark=function(e){return re.mark(this,e)};y.prototype._makeAbs=function(e){return re.makeAbs(this,e)};y.prototype.abort=function(){this.aborted=!0,this.emit("abort")};y.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};y.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};y.prototype._process=function(e,t,r,n){if(Rt(this instanceof y),Rt(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,t,r,n]);return}for(var i=0;typeof e[i]=="string";)i++;var s;switch(i){case e.length:this._processSimple(e.join("/"),t,n);return;case 0:s=null;break;default:s=e.slice(0,i).join("/");break}var a=e.slice(i),u;s===null?u=".":((Ae(s)||Ae(e.join("/")))&&(!s||!Ae(s))&&(s="/"+s),u=s);var o=this._makeAbs(u);if(ia(this,u))return n();var c=a[0]===En.GLOBSTAR;c?this._processGlobStar(s,u,o,a,t,r,n):this._processReaddir(s,u,o,a,t,r,n)}};y.prototype._processReaddir=function(e,t,r,n,i,s,a){var u=this;this._readdir(r,s,function(o,c){return u._processReaddir2(e,t,r,n,i,s,c,a)})};y.prototype._processReaddir2=function(e,t,r,n,i,s,a,u){if(!a)return u();for(var o=n[0],c=!!this.minimatch.negate,l=o._glob,h=this.dot||l.charAt(0)===".",f=[],d=0;d<a.length;d++){var p=a[d];if(p.charAt(0)!=="."||h){var v;c&&!e?v=!p.match(o):v=p.match(o),v&&f.push(p)}}var g=f.length;if(g===0)return u();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var d=0;d<g;d++){var p=f[d];e&&(e!=="/"?p=e+"/"+p:p=e+p),p.charAt(0)==="/"&&!this.nomount&&(p=Tt.join(this.root,p)),this._emitMatch(i,p)}return u()}n.shift();for(var d=0;d<g;d++){var p=f[d],_;e&&(e!=="/"?p=e+"/"+p:p=e+p),this._process([p].concat(n),i,s,u)}u()};y.prototype._emitMatch=function(e,t){if(!this.aborted&&!sa(this,t)){if(this.paused){this._emitQueue.push([e,t]);return}var r=Ae(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}};y.prototype._readdirInGlobStar=function(e,t){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,t);var r="lstat\0"+e,n=this,i=Dt(r,s);i&&n.fs.lstat(e,i);function s(a,u){if(a&&a.code==="ENOENT")return t();var o=u&&u.isSymbolicLink();n.symlinks[e]=o,!o&&u&&!u.isDirectory()?(n.cache[e]="FILE",t()):n._readdir(e,!1,t)}};y.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=Dt("readdir\0"+e+"\0"+t,r),!!r)){if(t&&!Nt(this.symlinks,e))return this._readdirInGlobStar(e,r);if(Nt(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return r();if(Array.isArray(n))return r(null,n)}var i=this;i.fs.readdir(e,ca(this,e,r))}};function ca(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}y.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}};y.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t);break}return r()}};y.prototype._processGlobStar=function(e,t,r,n,i,s,a){var u=this;this._readdir(r,s,function(o,c){u._processGlobStar2(e,t,r,n,i,s,c,a)})};y.prototype._processGlobStar2=function(e,t,r,n,i,s,a,u){if(!a)return u();var o=n.slice(1),c=e?[e]:[],l=c.concat(o);this._process(l,i,!1,u);var h=this.symlinks[r],f=a.length;if(h&&s)return u();for(var d=0;d<f;d++){var p=a[d];if(!(p.charAt(0)==="."&&!this.dot)){var v=c.concat(a[d],o);this._process(v,i,!0,u);var g=c.concat(a[d],n);this._process(g,i,!0,u)}}u()};y.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,function(i,s){n._processSimple2(e,t,i,s,r)})};y.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&Ae(e)&&!this.nomount){var s=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Tt.join(this.root,e):(e=Tt.resolve(this.root,e),s&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()};y.prototype._stat=function(e,t){var r=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return t();if(!this.stat&&Nt(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return t(null,i);if(n&&i==="FILE")return t()}var s,a=this.statCache[r];if(a!==void 0){if(a===!1)return t(null,a);var u=a.isDirectory()?"DIR":"FILE";return n&&u==="FILE"?t():t(null,u,a)}var o=this,c=Dt("stat\0"+r,l);c&&o.fs.lstat(r,c);function l(h,f){if(f&&f.isSymbolicLink())return o.fs.stat(r,function(d,p){d?o._stat2(e,r,null,f,t):o._stat2(e,r,d,p,t)});o._stat2(e,r,h,f,t)}};y.prototype._stat2=function(e,t,r,n,i){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[t]=!1,i();var s=e.slice(-1)==="/";if(this.statCache[t]=n,t.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var a=!0;return n&&(a=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||a,s&&a==="FILE"?i():i(null,a,n)}});var qn=w((co,Nn)=>{var E=require("assert"),kn=require("path"),Sn=require("fs"),de;try{de=St()}catch{}var la={nosort:!0,silent:!0},xt=0,ke=process.platform==="win32",Tn=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Sn[r],r=r+"Sync",e[r]=e[r]||Sn[r]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,e.glob===!1&&(e.disableGlob=!0),e.disableGlob!==!0&&de===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||la},Pt=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),E(e,"rimraf: missing path"),E.equal(typeof e,"string","rimraf: path should be a string"),E.equal(typeof r,"function","rimraf: callback function required"),E(t,"rimraf: invalid options argument provided"),E.equal(typeof t,"object","rimraf: options should be object"),Tn(t);let n=0,i=null,s=0,a=o=>{i=i||o,--s===0&&r(i)},u=(o,c)=>{if(o)return r(o);if(s=c.length,s===0)return r();c.forEach(l=>{let h=f=>{if(f){if((f.code==="EBUSY"||f.code==="ENOTEMPTY"||f.code==="EPERM")&&n<t.maxBusyTries)return n++,setTimeout(()=>It(l,t,h),n*100);if(f.code==="EMFILE"&&xt<t.emfileWait)return setTimeout(()=>It(l,t,h),xt++);f.code==="ENOENT"&&(f=null)}xt=0,a(f)};It(l,t,h)})};if(t.disableGlob||!de.hasMagic(e))return u(null,[e]);t.lstat(e,(o,c)=>{if(!o)return u(null,[e]);de(e,t.glob,u)})},It=(e,t,r)=>{E(e),E(t),E(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&ke&&On(e,t,n,r),i&&i.isDirectory())return Fe(e,t,n,r);t.unlink(e,s=>{if(s){if(s.code==="ENOENT")return r(null);if(s.code==="EPERM")return ke?On(e,t,s,r):Fe(e,t,s,r);if(s.code==="EISDIR")return Fe(e,t,s,r)}return r(s)})})},On=(e,t,r,n)=>{E(e),E(t),E(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(s,a)=>{s?n(s.code==="ENOENT"?null:r):a.isDirectory()?Fe(e,t,r,n):t.unlink(e,n)})})},An=(e,t,r)=>{E(e),E(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}let n;try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?Ke(e,t,r):t.unlinkSync(e)},Fe=(e,t,r,n)=>{E(e),E(t),E(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?fa(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})},fa=(e,t,r)=>{E(e),E(t),E(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let s=i.length;if(s===0)return t.rmdir(e,r);let a;i.forEach(u=>{Pt(kn.join(e,u),t,o=>{if(!a){if(o)return r(a=o);--s===0&&t.rmdir(e,r)}})})})},Rn=(e,t)=>{t=t||{},Tn(t),E(e,"rimraf: missing path"),E.equal(typeof e,"string","rimraf: path should be a string"),E(t,"rimraf: missing options"),E.equal(typeof t,"object","rimraf: options should be object");let r;if(t.disableGlob||!de.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch{r=de.sync(e,t.glob)}if(!!r.length)for(let n=0;n<r.length;n++){let i=r[n],s;try{s=t.lstatSync(i)}catch(a){if(a.code==="ENOENT")return;a.code==="EPERM"&&ke&&An(i,t,a)}try{s&&s.isDirectory()?Ke(i,t,null):t.unlinkSync(i)}catch(a){if(a.code==="ENOENT")return;if(a.code==="EPERM")return ke?An(i,t,a):Ke(i,t,a);if(a.code!=="EISDIR")throw a;Ke(i,t,a)}}},Ke=(e,t,r)=>{E(e),E(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR")throw r;(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")&&ha(e,t)}},ha=(e,t)=>{E(e),E(t),t.readdirSync(e).forEach(i=>Rn(kn.join(e,i),t));let r=ke?100:1,n=0;do{let i=!0;try{let s=t.rmdirSync(e,t);return i=!1,s}finally{if(++n<r&&i)continue}}while(!0)};Nn.exports=Pt;Pt.sync=Rn});var Vn=w((lo,F)=>{var k=require("fs"),Ut=require("os"),x=require("path"),Dn=require("crypto"),U={fs:k.constants,os:Ut.constants},Pn=qn(),xn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Cn=/XXXXXX/,da=3,jn=(U.O_CREAT||U.fs.O_CREAT)|(U.O_EXCL||U.fs.O_EXCL)|(U.O_RDWR||U.fs.O_RDWR),pa=Ut.platform()==="win32",ma=U.EBADF||U.os.errno.EBADF,va=U.ENOENT||U.os.errno.ENOENT,Mn=448,Ln=384,ga="exit",pe=[],Un=k.rmdirSync.bind(k),Gn=Pn.sync,Bn=!1;function Gt(e,t){let r=me(e,t),n=r[0],i=r[1];try{Wn(n)}catch(a){return i(a)}let s=n.tries;(function a(){try{let u=Kn(n);k.stat(u,function(o){if(!o)return s-- >0?a():i(new Error("Could not get a unique tmp filename, max tries reached "+u));i(null,u)})}catch(u){i(u)}})()}function Bt(e){let t=me(e),r=t[0];Wn(r);let n=r.tries;do{let i=Kn(r);try{k.statSync(i)}catch{return i}}while(n-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function ya(e,t){let r=me(e,t),n=r[0],i=r[1];Gt(n,function(a,u){if(a)return i(a);k.open(u,jn,n.mode||Ln,function(c,l){if(c)return i(c);if(n.discardDescriptor)return k.close(l,function(f){return i(f,u,void 0,jt(u,-1,n,!1))});{let h=n.discardDescriptor||n.detachDescriptor;i(null,u,l,jt(u,h?-1:l,n,!1))}})})}function _a(e){let t=me(e),r=t[0],n=r.discardDescriptor||r.detachDescriptor,i=Bt(r);var s=k.openSync(i,jn,r.mode||Ln);return r.discardDescriptor&&(k.closeSync(s),s=void 0),{name:i,fd:s,removeCallback:jt(i,n?-1:s,r,!0)}}function wa(e,t){let r=me(e,t),n=r[0],i=r[1];Gt(n,function(a,u){if(a)return i(a);k.mkdir(u,n.mode||Mn,function(c){if(c)return i(c);i(null,u,$n(u,n,!1))})})}function Ea(e){let t=me(e),r=t[0],n=Bt(r);return k.mkdirSync(n,r.mode||Mn),{name:n,removeCallback:$n(n,r,!0)}}function ba(e,t){let r=function(n){if(n&&!Lt(n))return t(n);t()};0<=e[0]?k.close(e[0],function(){k.unlink(e[1],r)}):k.unlink(e[1],r)}function Sa(e){let t=null;try{0<=e[0]&&k.closeSync(e[0])}catch(r){if(!Aa(r)&&!Lt(r))throw r}finally{try{k.unlinkSync(e[1])}catch(r){Lt(r)||(t=r)}}if(t!==null)throw t}function jt(e,t,r,n){let i=We(Sa,[t,e],n),s=We(ba,[t,e],n,i);return r.keep||pe.unshift(i),n?i:s}function $n(e,t,r){let n=t.unsafeCleanup?Pn:k.rmdir.bind(k),i=t.unsafeCleanup?Gn:Un,s=We(i,e,r),a=We(n,e,r,s);return t.keep||pe.unshift(s),r?s:a}function We(e,t,r,n){let i=!1;return function s(a){if(!i){let u=n||s,o=pe.indexOf(u);return o>=0&&pe.splice(o,1),i=!0,r||e===Un||e===Gn?e(t):e(t,a||function(){})}}}function Oa(){if(!!Bn)for(;pe.length;)try{pe[0]()}catch{}}function In(e){let t=[],r=null;try{r=Dn.randomBytes(e)}catch{r=Dn.pseudoRandomBytes(e)}for(var n=0;n<e;n++)t.push(xn[r[n]%xn.length]);return t.join("")}function Fn(e){return e===null||q(e)||!e.trim()}function q(e){return typeof e>"u"}function me(e,t){if(typeof e=="function")return[{},e];if(q(e))return[{},t];let r={};for(let n of Object.getOwnPropertyNames(e))r[n]=e[n];return[r,t]}function Kn(e){let t=e.tmpdir;if(!q(e.name))return x.join(t,e.dir,e.name);if(!q(e.template))return x.join(t,e.dir,e.template).replace(Cn,In(6));let r=[e.prefix?e.prefix:"tmp","-",process.pid,"-",In(12),e.postfix?"-"+e.postfix:""].join("");return x.join(t,e.dir,r)}function Wn(e){e.tmpdir=Jn(e);let t=e.tmpdir;if(q(e.name)||Ct(e.name,"name",t),q(e.dir)||Ct(e.dir,"dir",t),!q(e.template)&&(Ct(e.template,"template",t),!e.template.match(Cn)))throw new Error(`Invalid template, found "${e.template}".`);if(!q(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=q(e.name)?e.tries||da:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.dir=q(e.dir)?"":x.relative(t,Mt(e.dir,t)),e.template=q(e.template)?void 0:x.relative(t,Mt(e.template,t)),e.template=Fn(e.template)?void 0:x.relative(e.dir,e.template),e.name=q(e.name)?void 0:$t(e.name),e.prefix=q(e.prefix)?"":e.prefix,e.postfix=q(e.postfix)?"":e.postfix}function Mt(e,t){let r=$t(e);return r.startsWith(t)?x.resolve(r):x.resolve(x.join(t,r))}function $t(e){return Fn(e)?e:e.replace(/["']/g,"")}function Ct(e,t,r){if(t==="name"){if(x.isAbsolute(e))throw new Error(`${t} option must not contain an absolute path, found "${e}".`);let n=x.basename(e);if(n===".."||n==="."||n!==e)throw new Error(`${t} option must not contain a path, found "${e}".`)}else{if(x.isAbsolute(e)&&!e.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${e}".`);let n=Mt(e,r);if(!n.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${n}".`)}}function Aa(e){return zn(e,-ma,"EBADF")}function Lt(e){return zn(e,-va,"ENOENT")}function zn(e,t,r){return pa?e.code===r:e.code===r&&e.errno===t}function ka(){Bn=!0}function Jn(e){return x.resolve($t(e&&e.tmpdir||Ut.tmpdir()))}process.addListener(ga,Oa);Object.defineProperty(F.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return Jn()}});F.exports.dir=wa;F.exports.dirSync=Ea;F.exports.file=ya;F.exports.fileSync=_a;F.exports.tmpName=Gt;F.exports.tmpNameSync=Bt;F.exports.setGracefulCleanup=ka});var T=Ne(Pe()),Zn=require("child_process"),Hn=require("fs/promises"),ne=require("process");var Tr=require("child_process"),Rr="tempdir",Nr="systemd";function J(e,t){let r=(0,Tr.spawn)("sudo",e,{stdio:["ignore","ignore",t?.ignoreStderr?"ignore":"inherit"]});return new Promise((n,i)=>{r.on("close",s=>{s===0?n():i(new Error(e[0]+" exited with "+s))})})}var ve=Ne(Pe()),ge=require("fs/promises"),ze=Ne(require("path")),Qn=Ne(Vn());async function Xn(e){let{substituters:t,trustedPublicKeys:r,secretKeys:n,awsAccessKeyId:i,awsSecretAccessKey:s}=e,a="extra-substituters = "+t.join(" ")+`
`;r&&(a+="extra-trusted-public-keys = "+r.join(" ")+`
`);let u=null,o=null;try{let c=i&&s;if((n||c)&&(u=await new Promise((l,h)=>{(0,Qn.dir)({keep:!0,prefix:"setup-nix-cache-action"},(d,p)=>{d?h(d):l(p)})}),c&&(o=ze.join(u,"aws-credentials"),await(0,ge.writeFile)(o,`[default]
aws_access_key_id = ${i}
aws_secret_access_key = ${s}
`,{mode:384}),(0,ve.debug)("Wrote "+o)),n)){let l=[];for(let d=0;d<n.length;d++){let p=n[d],v=ze.join(u,"secret-key"+d);await(0,ge.writeFile)(v,p,{mode:384}),(0,ve.debug)("Wrote "+v),l.push(v)}a+="extra-secret-key-files = "+l.join(" ")+`
`;let h=`#!/bin/bash
set -euo pipefail
echo "Uploading paths: $OUT_PATHS" 1>&2
`;c&&(h+=`export AWS_SHARED_CREDENTIALS_FILE='${o}'
`),h+=`echo "$OUT_PATHS" | xargs /nix/var/nix/profiles/default/bin/nix \\
  --extra-experimental-features nix-command \\
  copy --to '${t[0]}' 1>&2
`;let f=ze.join(u,"post-build-hook");await(0,ge.writeFile)(f,h,{mode:493}),(0,ve.debug)("Wrote "+f),a+="post-build-hook = "+f+`
`}return{config:a,tempDir:u,credsPath:o}}catch(c){throw u&&await(0,ge.rm)(u,{recursive:!0,force:!0}).catch(l=>{(0,ve.warning)(l)}),c}}async function Yn(e,t,r){let n=r?.append?["tee","-a",e]:["tee",e],i=(0,Zn.spawn)("sudo",n,{stdio:["pipe","ignore","inherit"]}),s=new Promise((a,u)=>{i.on("close",o=>{o===0?a():u(new Error("tee exited with "+o))})});try{await new Promise((a,u)=>{i.stdin.write(t,o=>{o?u(o):a()})}),await new Promise(a=>{i.stdin.end(a)})}catch(a){throw i.kill(),a}finally{await s}}async function Ta(){if(ne.platform==="linux"){if(!await J(["systemctl","cat","nix-daemon.service"],{ignoreStderr:!0}).then(()=>!0,()=>!1))return;(0,T.info)("Restarting Nix daemon..."),await J(["systemctl","daemon-reload"]),await J(["systemctl","restart","nix-daemon.service"])}else if(ne.platform==="darwin"){if(!await(0,Hn.stat)("/Library/LaunchDaemons/org.nixos.nix-daemon.plist").then(()=>!0,()=>!1))return;(0,T.info)("Restarting Nix daemon..."),await J(["launchctl","kickstart","-k","system/org.nixos.nix-daemon"])}else throw new Error("cannot restart Nix daemon on unknown platform "+ne.platform)}function Ft(e){return e=e.trim(),e?e.split(/\s+/):[]}(async()=>{try{(0,T.info)("Generating configuration...");let{config:e,tempDir:t,credsPath:r}=await Xn({substituters:Ft((0,T.getInput)("substituters",{required:!0})),trustedPublicKeys:Ft((0,T.getInput)("trusted_public_keys")),secretKeys:Ft((0,T.getInput)("secret_keys")),awsAccessKeyId:(0,T.getInput)("aws_access_key_id"),awsSecretAccessKey:(0,T.getInput)("aws_secret_access_key")});if(t&&(J(["chown","-R","root:root",t]),(0,T.saveState)(Rr,t)),(0,T.info)("Saving configuration..."),await J(["mkdir","-p","/etc/nix"]),await Yn("/etc/nix/nix.conf",e,{append:!0}),r&&ne.platform==="linux"){if(ne.platform!=="linux")throw new Error("Private substituters not supported on "+ne.platform);await J(["mkdir","-p","/etc/systemd/system/nix-daemon.service.d"]);let n="/etc/systemd/system/nix-daemon.service.d/aws-credentials.conf";await Yn(n,`[Service]
Environment=AWS_SHARED_CREDENTIALS_FILE=`+r+`
`),(0,T.saveState)(Nr,n)}await Ta(),(0,T.info)("Done!")}catch(e){e instanceof Error?(0,T.setFailed)(e.message):(0,T.setFailed)(e+"")}})();
/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
/**
@license
Copyright 2022 Ross Light

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

SPDX-License-Identifier: Apache-2.0
**/
